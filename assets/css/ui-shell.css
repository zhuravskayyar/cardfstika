@import url('https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&family=EB+Garamond:wght@400;500;600;700&display=swap');

:root{
  --bg0:#0d0a07;
  --bg1:#15100a;
  --ink:#f4e9d4;

  --fs-12: 12px;
  --fs-14: 14px;
  --fs-16: 16px;
  --fs-18: 18px;
  
  --heraldic-red:#8b1e1e;
  --heraldic-gold:#b89446;
  --heraldic-blue:#2a4f6e;
  --heraldic-green:#3a5c3a;
  
  --stone-dark:#3a3329;
  --stone-light:#5a5347;
  
  --line: rgba(180, 160, 120, 0.15);
  --shadow: rgba(0,0,0,0.65);
  
  --hudH: 72px;
  --botH: 82px;
  
  --r: 12px;
  --r-small: 8px;
  --gameW: 425px;
  
  /* Глобальний масштаб тексту */
  --text-scale: 1.15;

  /* Button textures (paths are relative to assets/css/ui-shell.css) */
  --btn-tex-gold:  url("../textures/btn-gold.png");
  --btn-tex-green: url("../textures/btn-green.png");
  --btn-tex-grey:  url("../textures/btn-grey.png");
  --btn-tex-wood:  url("../textures/btnwood.png");
  --btn-tex-main:  url("../textures/main.png");
  --btn-tex-profil:url("../textures/profil.png");
  --btn-tex-guild: url("../textures/guild.png");
  --btn-tex-blue:  var(--btn-tex-grey);
}

*{ box-sizing:border-box; margin:0; padding:0; }
html,body{ height:100%; }
html{ font-size: calc(16px * var(--text-scale)); }
body{
  font-family:"EB Garamond", serif;
  font-size: 1rem;
  color: var(--ink);
  background:
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" opacity="0.03"><path d="M20,20 L80,20 L90,40 L80,60 L20,60 L10,40 Z" fill="none" stroke="%23b89446" stroke-width="1"/></svg>'),
    radial-gradient(ellipse at 30% -10%, rgba(139, 30, 30, 0.08), transparent 60%),
    radial-gradient(ellipse at 80% 15%, rgba(42, 79, 110, 0.06), transparent 55%),
    linear-gradient(180deg, var(--bg1), var(--bg0));
  letter-spacing:.1px;
  line-height:1.45;
}

h1,h2,h3,.ui-title{
  font-family:"UnifrakturMaguntia", serif;
  letter-spacing:.8px;
}

.ui-label{ font-size: var(--fs-14); font-weight: 600; }
.ui-title{ font-size: var(--fs-16); font-weight: 800; }
.ui-stat { font-size: var(--fs-14); font-weight: 800; font-variant-numeric: tabular-nums; }

/* ЗОЛОТИЙ ТЕКСТ ДЛЯ ТЕКСТУР (дерево/темні панелі) */
.txt-gold{
  color: #e8d08a;
  font-weight: 700;
  letter-spacing: .2px;
  text-shadow:
    0 2px 0 rgba(0,0,0,.75),
    0 6px 14px rgba(0,0,0,.45);
  -webkit-text-stroke: .35px rgba(40,26,10,.75);
}

.btn-wood{
  display:flex;
  align-items:center;
  gap:10px;
  padding:14px 16px;
}
.btn-wood .ico{ width:18px; height:18px; flex:0 0 auto; }
.btn-wood .label{ line-height:1; transform: translateY(1px); }

.app{
  min-height:100%;
  position:relative;
  overflow-x:hidden;
  /* 🔒 Lock to 425px, але без перелому на вузьких екранах */
  width: min(100vw, var(--gameW));
  max-width: var(--gameW);
  margin: 0 auto;
}

/* ===== HUD ===== */
.hud{
  position:fixed;
  inset:0 0 auto 0;
  height: var(--hudH);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 18px;
  /* allow XP bar overlay inside */
  overflow: visible;
  color: rgba(244,233,212,.92);
  text-shadow: 0 1px 0 rgba(0,0,0,.6);
  background:
    linear-gradient(180deg, rgba(13,10,7,0.9), rgba(58,51,41,0.7));
  border-bottom: 2px solid var(--heraldic-red);
  border-image: linear-gradient(90deg, transparent, var(--heraldic-red), transparent) 1;
  backdrop-filter: blur(8px);
  z-index: 50;
  box-shadow: 0 8px 25px var(--shadow);
}

.hud__left{
  display: flex;
  align-items: center;
  gap: 12px;
}

.hud__avatar{
  width: 44px;
  height: 44px;
  border-radius: 10px;
  position: relative;
  overflow: hidden;
  border: 2px solid rgba(184,148,70,0.65);
  box-shadow: 0 10px 22px rgba(0,0,0,0.55);
  background: rgba(0,0,0,0.25);
  flex: 0 0 auto;
}

.hud__avatar img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* (HUD league removed) */

.hud__xpbar{
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 5px;
  background: rgba(0,0,0,0.35);
}

.hud__xpbar-fill{
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #2ecc71, #b4f58a);
  box-shadow: 0 0 18px rgba(46,204,113,0.35);
}

.hud__title{
  font-weight: 700;
  letter-spacing: 1px;
  font-size: 22px;
  color: var(--heraldic-gold);
  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
}
.hud__sub{
  font-size: 13px;
  opacity: 0.8;
  margin-top: 2px;
  font-family: "EB Garamond", serif;
  font-style: italic;
}

.hud__right{ display:flex; gap:12px; align-items:center; }
.hud__pill{
  display:flex;
  align-items:center;
  gap:8px;
  padding: 10px 14px;
  border: none;
  border-radius: 999px;
  background: rgba(13,10,7,0.35);
  box-shadow: 0 8px 20px var(--shadow);
  font-family: "EB Garamond", serif;
  position: relative;
  overflow: hidden;
}
.hud__pill::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(184,148,70,0.4), transparent);
}
.hud__label{ opacity:0.9; }
.hud__value{
  min-width: 28px;
  text-align:right;
  font-weight:800;
  font-variant-numeric: tabular-nums;
  color: var(--heraldic-gold);
}

.hud .ui-stat{ font-size: inherit; }

.hud__currency-icon{
  width: 18px;
  height: 18px;
  object-fit: contain;
  display: block;
  filter: drop-shadow(0 3px 8px rgba(0,0,0,0.55));
  opacity: 0.95;
}

/* ===== Універсальні SVG іконки ===== */
.icon {
  width: 1em;
  height: 1em;
  display: inline-block;
  vertical-align: middle;
  object-fit: contain;
}
.icon--gold { width: 14px; height: 14px; }
.icon--sm { width: 12px; height: 12px; }
.icon--md { width: 18px; height: 18px; }
.icon--lg { width: 24px; height: 24px; }

/* SVG іконки для валют */
.hud__icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}

.hud__icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.hud__icon--swords{
  background: #fff;
  -webkit-mask: url("../icons/swords-solid.svg") center / contain no-repeat;
          mask: url("../icons/swords-solid.svg") center / contain no-repeat;
}

.shop-card__currency {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.shop-card__currency img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

/* ===== Screen container ===== */
.screen{
  padding: calc(var(--hudH) + 18px) 16px calc(var(--botH) + 20px);
  min-height: 100vh;
}

.panel{
  border: 2px solid var(--stone-dark);
  border-radius: var(--r);
  background: 
    linear-gradient(145deg, rgba(13,10,7,0.7), rgba(58,51,41,0.5));
  box-shadow: 
    0 20px 45px var(--shadow),
    inset 0 1px 0 rgba(255,255,255,0.05);
  padding: 20px;
  position: relative;
  overflow: hidden;
}
.panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--heraldic-red), var(--heraldic-gold), var(--heraldic-blue));
  opacity: 0.6;
}

.panel__title{
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 10px;
  color: var(--heraldic-gold);
  border-bottom: 1px solid rgba(184,148,70,0.3);
  padding-bottom: 6px;
}
.panel__text{
  opacity: 0.85;
  line-height: 1.5;
  font-size: 16px;
  font-family: "EB Garamond", serif;
}

/* ===== Botbar ===== */
.botbar{
  position:fixed;
  inset:auto 0 0 0;
  height: var(--botH);
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 12px;
  padding: 10px 12px 14px;
  background: #1a1510;
  z-index: 50;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
}

.botbar__btn{
  appearance:none;
  border: none;
  background: linear-gradient(180deg, #d4c4a8 0%, #c9b896 30%, #b8a57a 70%, #a89460 100%);
  border-radius: 10px;
  color: #3d2f1f;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 4px;
  padding: 8px 6px;
  cursor:pointer;
  transition: all 0.15s ease;
  font-family: "EB Garamond", serif;
  position: relative;
  overflow: hidden;
  min-height: 56px;
  border: 2px solid #8b7355;
  box-shadow: 
    inset 0 1px 0 rgba(255,255,255,0.3),
    inset 0 -2px 4px rgba(0,0,0,0.15),
    0 2px 6px rgba(0,0,0,0.4);
  --btn-tex-botbar: var(--btn-tex-wood);
}

.botbar__btn[data-route="home"]{ --btn-tex-botbar: var(--btn-tex-main); }
.botbar__btn[data-route="profile"]{ --btn-tex-botbar: var(--btn-tex-profil); }
.botbar__btn[data-route="guild"]{ --btn-tex-botbar: var(--btn-tex-guild); }

/* Текстура пергаменту */
.botbar__btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    linear-gradient(180deg, rgba(255,255,255,0.10), rgba(0,0,0,0.12)),
    var(--btn-tex-botbar) center / cover no-repeat;
  border-radius: 8px;
  pointer-events: none;
  opacity: 1;
}

/* Індикатор активності */
.botbar__btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(255,200,100,0.2) 0%, transparent 50%);
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 1;
  border-radius: 8px;
}

.botbar__btn:hover {
  transform: translateY(-2px);
  box-shadow: 
    inset 0 1px 0 rgba(255,255,255,0.4),
    inset 0 -2px 4px rgba(0,0,0,0.15),
    0 4px 12px rgba(0,0,0,0.5);
}

.botbar__btn:active{ transform: translateY(1px); }

.botbar__btn.is-active{
  background: linear-gradient(180deg, #e8d8bc 0%, #dccaa8 30%, #c8b68a 70%, #b8a670 100%);
  border-color: var(--heraldic-gold);
}
.botbar__btn.is-active::before {
  opacity: 1;
}
.botbar__btn.is-active::after{
  filter: brightness(1.08) saturate(1.05);
}
/* Текст та іконки завжди над текстурою - темно-коричневий колір */
.botbar__icon,
.botbar__text {
  position: relative;
  z-index: 2;
  color: #4a3a2a;
  text-shadow: 0 1px 0 rgba(255,255,255,0.3);
}

.botbar__icon{ 
  font-size: 24px; 
  line-height: 1; 
}
.botbar__text{ 
  font-size: 12px; 
  font-weight: 600;
  letter-spacing: 0.3px;
}

/* Botbar without emoji/icons */
.botbar .botbar__icon{
  display: none;
}
.botbar .botbar__btn{
  gap: 0;
}

/* ===== Toast/Modal hosts ===== */
.toast-host{
  position: fixed;
  left: 16px;
  right: 16px;
  top: calc(var(--hudH) + 12px);
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index: 60;
  pointer-events:none;
}
.toast{
  pointer-events:none;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.70);
  color: rgba(244,233,212,0.95);
  box-shadow: 0 12px 26px rgba(0,0,0,0.55);
  transform: translateY(-6px);
  opacity: 0;
  transition: transform .18s ease, opacity .18s ease;
}
.toast.is-show{
  transform: translateY(0);
  opacity: 1;
}
.modal-host{
  position: fixed;
  inset: 0;
  z-index: 70;
  display: none;          /* за замовчуванням НЕ затемнює гру */
  pointer-events: none;
  background: transparent;
}

/* Коли модал відкритий — додаємо клас is-open */
.modal-host.is-open{
  display: block;
  pointer-events: auto;
  background: rgba(13,10,7,0.85);
}

/* ===== Confirm modal (Yes/No) ===== */
.confirm-modal{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: calc(var(--hudH) + 40px) 16px 16px;
}

.confirm-modal__panel{
  width: min(360px, 92%);
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: linear-gradient(180deg, rgba(30,26,20,0.92), rgba(10,8,6,0.92));
  box-shadow: 0 18px 34px rgba(0,0,0,0.65);
  padding: 12px 12px 14px;
  text-align: center;
}

.confirm-modal__actions{
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-bottom: 10px;
}

.confirm-modal__btn{
  flex: 1;
  min-width: 120px;
  height: 44px;
  position: relative;
  overflow: hidden;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  cursor: pointer;
  color: rgba(235,255,225,0.95);
  text-shadow: 0 1px 0 rgba(0,0,0,0.7);
  font-family: "EB Garamond", serif;
  font-weight: 900;
  letter-spacing: 0.3px;
  box-shadow: 0 14px 26px rgba(0,0,0,0.65);
}

.confirm-modal__btn::before{
  content: "";
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  opacity: 0.6;
  pointer-events: none;
}

.confirm-modal__btn > span{
  position: relative;
  z-index: 1;
}

.confirm-modal__btn--yes{
  border-color: rgba(90,210,120,0.25);
  background: linear-gradient(180deg, rgba(40,120,40,0.78), rgba(16,60,16,0.55));
}
.confirm-modal__btn--yes::before{
  background-image: var(--btn-tex-green);
}

.confirm-modal__btn--no{
  border-color: rgba(80,190,255,0.25);
  background: linear-gradient(180deg, rgba(20,70,110,0.75), rgba(10,35,65,0.75));
}
.confirm-modal__btn--no::before{
  background-image: var(--btn-tex-blue);
}

.confirm-modal__btn:active{
  transform: translateY(1px);
}

.confirm-modal__body{
  font-family: "EB Garamond", serif;
  font-weight: 700;
  color: rgba(244,233,212,0.92);
  text-shadow: 0 1px 0 rgba(0,0,0,0.65);
}

.confirm-modal__line{
  line-height: 1.35;
}
.confirm-modal__line + .confirm-modal__line{
  margin-top: 4px;
}

.confirm-modal__coin{
  width: 16px;
  height: 16px;
  vertical-align: -3px;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,0.65));
}

/* ===== Home tiles ===== */
.tiles{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin-bottom: 24px;
}
.tile{
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:16px;
  border-radius: var(--r-small);
  background: 
    linear-gradient(145deg, rgba(13,10,7,0.8), rgba(58,51,41,0.6));
  border: 2px solid var(--stone-dark);
  text-decoration:none;
  color: inherit;
  transition: transform 0.2s ease, border-color 0.2s ease;
  position: relative;
  overflow: hidden;
}
.tile::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border: 1px solid rgba(184,148,70,0.1);
  border-radius: var(--r-small);
  pointer-events: none;
}
.tile:hover {
  transform: translateY(-2px);
  border-color: var(--heraldic-gold);
}

.tile__art{
  height:96px;
  border-radius:var(--r-small);
  background: 
    linear-gradient(145deg, rgba(42,79,110,0.3), rgba(13,10,7,0.6)),
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" opacity="0.1"><path d="M0,0 L20,0 L20,20 L0,20 Z" fill="none" stroke="%23b89446" stroke-width="0.5"/></svg>');
  border: 1px solid rgba(90,83,71,0.3);
  position: relative;
}
.tile__art::before {
  content: '⚜';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  opacity: 0.2;
  color: var(--heraldic-gold);
}
.tile__label{ 
  font-size:16px; 
  font-weight: 600;
  color: var(--heraldic-gold);
  text-align: center;
}

/* Center the deck power block (sword icon + value) inside tile label */
.tile__label > .tile__deck-power{
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  line-height: 1;
}
.tile__label > .tile__deck-power .hud__icon{
  width: 20px;
  height: 20px;
  display: block;
  margin: 0;
}

/* ===== Menu list ===== */
.menu-list{ 
  display:flex; 
  flex-direction:column; 
  gap:10px; 
}
.menu-item{
  display:flex;
  align-items:center;
  justify-content: center;
  gap: 0;
  padding:14px 16px;
  border-radius:var(--r-small);
  background: linear-gradient(145deg, rgba(80,70,50,0.7), rgba(60,50,30,0.8));
  text-decoration:none;
  color: #1a1a1a;
  border: none;
  transition: transform 0.2s ease;
  position: relative;
  overflow: hidden;
  font-weight: 700;
}

/* Текстура пергаменту на menu-item */
.menu-item::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: var(--r-small);
  pointer-events: none;
  opacity: 0.85;
}

.menu-item:hover {
  transform: translateX(4px);
}
.menu-item::before {
  content: '▶';
  position: absolute;
  left: 6px;
  color: #1a1a1a;
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 2;
}
.menu-item:hover::before {
  opacity: 0.6;
}

.menu-item__icon{ 
  display: none;
}

.menu-item__text{
  position: relative;
  z-index: 2;
  width: 100%;
  text-align: center;
  font-family: "Forum", "EB Garamond", serif;
  font-size: 52px;
  font-weight: 700;
  letter-spacing: 0.3px;
  line-height: 1.02;
  color: #e2b24a !important;
  text-shadow:
    0 1px 0 rgba(52,26,6,0.85),
    0 3px 0 rgba(0,0,0,0.65),
    0 10px 20px rgba(0,0,0,0.45);
}

/* Текст у меню повинен бути видимим над текстурою */
.menu-item > * {
  position: relative;
  z-index: 1;
}

/* ===== Botbar variations ===== */
.botbar.botbar--3{ 
  grid-template-columns: repeat(3, 1fr); 
  padding:14px; 
  gap:12px; 
}

/* Гарантуємо, що botbar--3 показує лише 3 кнопки */
.botbar.botbar--3 .botbar__btn:nth-child(n+4) {
  display: none;
}

/* ===== Decorative elements ===== */
@media (min-width:900px){
  .tiles{ grid-template-columns: repeat(3, 1fr); }
  
  /* Додаткові середньовічні декоративні елементи для великих екранів */
  .app::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      radial-gradient(circle at 20% 30%, rgba(139, 30, 30, 0.03) 2px, transparent 2px),
      radial-gradient(circle at 80% 70%, rgba(42, 79, 110, 0.03) 2px, transparent 2px);
    background-size: 50px 50px;
    pointer-events: none;
    z-index: 1;
  }
}

/* Готичні шрифти та деталі */

/* Додаткові середньовічні стилі для тексту */
h1, h2, h3, h4, h5, h6 {
  font-family: "UnifrakturMaguntia", serif;
  letter-spacing: 1px;
}

p, span, div:not(.hud__title):not(.panel__title):not(.tile__label) {
  font-family: "EB Garamond", serif;
}

/* ===== 425px Stage lock (правильний) ===== */
/* Центруємо fixed-елементи в межах "вікна" 425px */
.hud,
.botbar,
.toast-host,
.modal-host{
  left: 50%;
  right: auto;
  width: min(100vw, var(--gameW));
  max-width: var(--gameW);
  transform: translateX(-50%);
}

/* Контент теж живе в цьому ж вікні */
.screen{
  width: 100%;
  max-width: var(--gameW);
  margin: 0 auto;
  box-sizing: border-box;
}

/* iOS safe-area: щоб не з’їдало padding по краях */
.hud{
  padding-left: calc(18px + env(safe-area-inset-left));
  padding-right: calc(18px + env(safe-area-inset-right));
}
.botbar{
  padding-left: calc(14px + env(safe-area-inset-left));
  padding-right: calc(14px + env(safe-area-inset-right));
  padding-bottom: calc(16px + env(safe-area-inset-bottom));
}
.screen{
  padding-left: calc(16px + env(safe-area-inset-left));
  padding-right: calc(16px + env(safe-area-inset-right));
}

.menu-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 12px;
  border-radius:12px;
  background: rgba(0,0,0,0.16);
  text-decoration:none;
  color:inherit;
  border:1px solid rgba(255,255,255,0.02);
}
.menu-item__icon{ font-size:18px; }
.menu-item--gold{ border-color: rgba(168,132,50,0.25); background: rgba(168,132,50,0.08); }

/* ===== Botbar variations ===== */
.botbar.botbar--3{ grid-template-columns: repeat(3, 1fr); padding:10px; gap:8px; }

@media (min-width:900px){
  .tiles{ grid-template-columns: repeat(3, 1fr); }
}

/* ===================== DECK SCREEN (markup only) ===================== */
.deck-screen{
  padding-top: calc(var(--hudH) + 10px);
}

/* зелена шапка */
.deck-banner{
  margin: 0 0 10px;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(80,190,255,0.20);
  background: linear-gradient(180deg, rgba(40,120,40,0.75), rgba(18,60,18,0.55));
  box-shadow: 0 16px 30px var(--shadow);
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 10px;
}
.deck-banner__title{
  font-family: "EB Garamond", serif;
  font-weight: 800;
  letter-spacing: 0.4px;
  color: #e8ffd8;
  text-shadow: 0 1px 0 rgba(0,0,0,0.55);
}
.deck-banner__power{
  font-family: "EB Garamond", serif;
  font-weight: 800;
  color: #e8ffd8;
  opacity: 0.95;
}

/* підказка "Покращуйте" */
.deck-hint{
  margin: 0 0 10px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(80,190,255,0.18);
  background: rgba(0,0,0,0.28);
}
.deck-hint__line{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 10px;
  font-family: "EB Garamond", serif;
  font-weight: 700;
  color: rgba(220,245,255,0.9);
}
.deck-hint__icon{ opacity: 0.65; }

/* 3x3 grid */
.deck-grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 14px;
  margin-bottom: 14px;
}

/* ===== Deck: cards 100x120 + top bar 20px ===== */
.deck-screen .deck-grid{
  grid-template-columns: repeat(3, 100px);
  justify-content: center;
}

.deck-screen .deck-grid .ref-card{
  width: 100px;
  height: 120px;
  aspect-ratio: auto;
  border-radius: 10px;
}

/* рамка/підсвітка: підлаштовуємо під новий радіус */
.deck-screen .deck-grid .ref-card::before{ inset: 4px; border-radius: 8px; }
.deck-screen .deck-grid .ref-card::after{ border-radius: 10px; }

/* TOP BAR: 20px, full width */
.deck-screen .deck-grid .ref-card__top{
  height: 20px;
  left: 0;
  right: 0;
  top: 0;
  width: 100px;
  padding: 0 6px;
  border-radius: 0;
  background: linear-gradient(180deg, rgba(245,240,225,0.96), rgba(225,215,190,0.92));
  z-index: 4;
}

/* element gradient on the top bar (override base gradients) */
.deck-screen .deck-grid .ref-card.elem-fire  .ref-card__top{
  background: linear-gradient(180deg, rgba(255,245,235,0.96), rgba(255,205,195,0.92));
}
.deck-screen .deck-grid .ref-card.elem-water .ref-card__top{
  background: linear-gradient(180deg, rgba(240,250,255,0.96), rgba(190,220,255,0.92));
}
.deck-screen .deck-grid .ref-card.elem-earth .ref-card__top{
  background: linear-gradient(180deg, rgba(245,255,245,0.96), rgba(190,235,200,0.92));
}
.deck-screen .deck-grid .ref-card.elem-air   .ref-card__top{
  background: linear-gradient(180deg, rgba(255,252,240,0.96), rgba(245,220,150,0.92));
}

/* меч-бейдж (rarity) — 18x18 */
.deck-screen .deck-grid .ref-card__type{
  width: 18px;
  height: 18px;
  border-radius: 3px;
  flex: 0 0 auto;
}

.deck-screen .deck-grid .ref-card__power{
  font-size: 14px;
  line-height: 1;
  font-weight: 900;
}

/* ART: нижче плашки (120-20 = 100px), заповнює весь простір */
.deck-screen .deck-grid .ref-card__art{
  top: 20px;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 0;

  background-image: var(--art);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  box-shadow: inset 0 -18px 24px rgba(0,0,0,.55);
}

/* елемент внизу справа — просто піджимаємо */
.deck-screen .deck-grid .ref-card__elem{
  right: 4px;
  bottom: 4px;
  width: 18px;
  height: 18px;
  z-index: 5;
}

.deck-screen .deck-grid .ref-card.is-upgradable{ z-index: 3; }
.deck-screen .deck-grid .ref-card__up{
  left: 50%;
  bottom: 4px;
  transform: translateX(-50%);
  z-index: 6;
  pointer-events:none;
}



/* mini card */
.card-mini{
  position: relative;
  height: 118px;               /* ↑ більше як у рефі */
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.10);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.18)),
    rgba(0,0,0,0.30);
  box-shadow: 0 14px 28px var(--shadow);
  overflow: hidden;
  cursor: pointer;
}
.card-mini__art{
  position:absolute;
  inset: 0;
  background:
    radial-gradient(120px 80px at 50% 20%, rgba(80,190,255,0.10), transparent 60%);
}
.card-mini__power{
  position:absolute;
  left: 6px;
  top: 6px;
  font-family: "EB Garamond", serif;
  font-weight: 900;
  font-size: 14px;
  padding: 2px 6px;
  border-radius: 7px;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.10);
}
.card-mini__elem{
  position:absolute;
  right: 6px;
  bottom: 6px;
  width: 18px;                 /* квадрат як на скріні */
  height: 18px;
  border-radius: 5px;
  background: rgba(255,255,255,0.12); /* буде перевизначено стихією */
  border: 2px solid rgba(0,0,0,0.85);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.20), 0 10px 18px rgba(0,0,0,0.45);
  font-size: 0;                /* прибираємо емодзі/текст (поки без іконок) */
}

/* ===== elements: fire / water / earth / air ===== */
.card-mini.elem-fire  { border-color: rgba(255, 90, 60, 0.70); }
.card-mini.elem-water { border-color: rgba( 80,150,255, 0.70); }
.card-mini.elem-earth { border-color: rgba( 90,210,120, 0.70); }
.card-mini.elem-air   { border-color: rgba(245,200,80, 0.70); }

/* квадрат-індикатор стихії (всередині карти) з SVG іконками */
.card-mini.elem-fire  .card-mini__elem { background: rgba(255, 90, 60, 0.10) url('../icons/fire.svg') center/70% no-repeat; }
.card-mini.elem-water .card-mini__elem { background: rgba( 80,150,255, 0.10) url('../icons/water.svg') center/70% no-repeat; }
.card-mini.elem-earth .card-mini__elem { background: rgba( 90,210,120, 0.10) url('../icons/earth.svg') center/70% no-repeat; }
.card-mini.elem-air   .card-mini__elem { background: rgba(245,200,80, 0.10) url('../icons/air.svg') center/70% no-repeat; }

/* extra cards */
.extra-block{
  margin: 0 0 12px;
  padding: 10px 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(80,190,255,0.16);
  background: rgba(0,0,0,0.22);
}
.extra-block__title{
  text-align:center;
  margin-bottom: 10px;
  font-family: "EB Garamond", serif;
  font-weight: 800;
  opacity: 0.9;
}
.extra-grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}
.extra-slot{ text-align:center; }
.extra-slot__card{
  height: 64px;
  border-radius: 10px;
  border: 1px dashed rgba(255,255,255,.14);
  background: rgba(0,0,0,.25);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
  margin-bottom: 6px;
}
.extra-slot__label{
  font-family: "EB Garamond", serif;
  font-size: 13px;
  opacity: 0.85;
}
.extra-link{
  display:block;
  margin-top: 10px;
  text-align:center;
  font-family: "EB Garamond", serif;
  font-size: 12px;
  opacity: 0.85;
  color: var(--ink);
  text-decoration: none;
}
.extra-link:hover{ opacity: 1; }

/* info bars */
.info-rail{ display:flex; flex-direction:column; gap:8px; margin: 0 0 12px; }
.info-rail__bar{
  padding: 10px 10px;
  border-radius: 10px;
  border: 1px solid rgba(80,190,255,0.14);
  background: rgba(0,0,0,0.20);
  font-family: "EB Garamond", serif;
  font-size: 13px;
  line-height: 1.25;
  opacity: 0.9;
}

/* bottom menu like blue rails */
.bottom-menu{
  display:flex;
  flex-direction:column;
  gap: 8px;
  margin-bottom: 6px;
}
.bottom-menu__item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(80,190,255,0.18);
  background: linear-gradient(180deg, rgba(80,190,255,0.10), rgba(0,0,0,0.22));
  color: var(--ink);
  text-decoration:none;
  box-shadow: 0 14px 26px var(--shadow);
  position: relative;
  overflow: hidden;
}
.bottom-menu__item::before{
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  opacity: 0.85;
  pointer-events: none;
  border-radius: 12px;
  z-index: 0;
}
.bottom-menu__item::after{
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 40%, rgba(0,0,0,0.2) 100%);
  pointer-events: none;
  border-radius: 12px;
  z-index: 1;
}
.bottom-menu__icon,
.bottom-menu__text,
.bottom-menu__dot{
  position: relative;
  z-index: 2;
}
.bottom-menu__icon{ opacity: 0.95; }
.bottom-menu__text{
  flex:1;
  font-family: "EB Garamond", serif;
  font-weight: 800;
  letter-spacing: 0.2px;
}
.bottom-menu__dot{
  width: 10px; height: 10px;
  border-radius: 999px;
  background: rgba(120,255,120,0.85);
  box-shadow: 0 0 0 2px rgba(0,0,0,0.35);
}

/* ===================== MINI CARD (ref-like) ===================== */

/* 6 rarity tokens (заповниш під свій баланс/кольори) */
:root{
  --r1-a: rgba(120,120,120,.55);  --r1-b: rgba(40,40,40,.65);
  --r2-a: rgba(60,200,90,.55);    --r2-b: rgba(25,70,35,.70);
  --r3-a: rgba(80,150,255,.60);   --r3-b: rgba(20,45,85,.75);
  --r4-a: rgba(190,90,255,.60);   --r4-b: rgba(55,20,85,.78);
  --r5-a: rgba(255,190,60,.65);   --r5-b: rgba(85,55,15,.78);
  --r6-a: rgba(255,90,90,.60);    --r6-b: rgba(90,15,15,.80);
}

.mini-card{
  position: relative;
  width: 100%;
  aspect-ratio: 3 / 4;         /* як у рефі */
  border-radius: 10px;
  overflow: hidden;
  cursor: pointer;
  border: 2px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.35);
  box-shadow: 0 14px 28px var(--shadow);
  padding: 0;
}

/* Rarity frame + glow */
.mini-card::before{
  content:"";
  position:absolute;
  inset: 0;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--ra), var(--rb));
  opacity: 0.92;
}
.mini-card::after{
  content:"";
  position:absolute;
  inset: 2px;
  border-radius: 8px;
  background: radial-gradient(140px 110px at 50% 20%, rgba(255,255,255,0.06), rgba(0,0,0,0.18));
  border: 1px solid rgba(255,255,255,0.06);
}

/* map rarity -> vars */
.rarity-1{ --ra: var(--r1-a); --rb: var(--r1-b); }
.rarity-2{ --ra: var(--r2-a); --rb: var(--r2-b); }
.rarity-3{ --ra: var(--r3-a); --rb: var(--r3-b); }
.rarity-4{ --ra: var(--r4-a); --rb: var(--r4-b); }
.rarity-5{ --ra: var(--r5-a); --rb: var(--r5-b); }
.rarity-6{ --ra: var(--r6-a); --rb: var(--r6-b); }

/* top panel */
.mini-card__top{
  position:absolute;
  top: 6px;
  left: 6px;
  right: 6px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 8px;
  z-index: 3;
  pointer-events:none;
}

.mini-card__power{
  display:inline-flex;
  align-items:center;
  gap: 6px;
  padding: 3px 7px;
  border-radius: 8px;
  background: rgba(0,0,0,0.65);
  border: 1px solid rgba(255,255,255,0.10);
  font-family: "EB Garamond", serif;
  font-weight: 900;
  font-size: 14px;
  color: var(--ink);
  text-shadow: 0 1px 0 rgba(0,0,0,0.75);
}

/* маленький “піп” як у рефі (можна потім замінити на SVG) */
.mini-card__pip{
  width: 14px;
  height: 14px;
  border-radius: 4px;
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(0,0,0,0.45);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.18);
}

/* art area */
.mini-card__art{
  position:absolute;
  inset: 0;
  z-index: 2;
  background-size: cover;
  background-position: center;
  filter: saturate(1.02) contrast(1.02);
}

/* якщо картинки ще нема — буде “темний арт” */
.mini-card__art:empty{
  background:
    radial-gradient(160px 120px at 50% 20%, rgba(255,255,255,0.06), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.15), rgba(0,0,0,0.35));
}

/* element icon bottom-right */
.mini-card__elem{
  position:absolute;
  right: 6px;
  bottom: 6px;
  width: 18px;
  height: 18px;
  border-radius: 5px;
  border: 2px solid rgba(0,0,0,0.85);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.20), 0 10px 18px rgba(0,0,0,0.45);
  z-index: 3;
}

/* 4 elements з SVG іконками */
.elem-fire  .mini-card__elem{ background: rgba(255, 90, 60, 0.10) url('../icons/fire.svg') center/70% no-repeat; }
.elem-water .mini-card__elem{ background: rgba( 80,150,255, 0.10) url('../icons/water.svg') center/70% no-repeat; }
.elem-earth .mini-card__elem{ background: rgba( 90,210,120, 0.10) url('../icons/earth.svg') center/70% no-repeat; }
.elem-air   .mini-card__elem{ background: rgba(245,200,80, 0.10) url('../icons/air.svg') center/70% no-repeat; }

/* optional: subtle inner stroke by element (як у рефі рамки різні) */
.elem-fire  { box-shadow: 0 14px 28px var(--shadow), 0 0 0 1px rgba(255,90,60,0.25) inset; }
.elem-water { box-shadow: 0 14px 28px var(--shadow), 0 0 0 1px rgba(80,150,255,0.25) inset; }
.elem-earth { box-shadow: 0 14px 28px var(--shadow), 0 0 0 1px rgba(90,210,120,0.25) inset; }
.elem-air   { box-shadow: 0 14px 28px var(--shadow), 0 0 0 1px rgba(245,200,80,0.25) inset; }

/* ===================== REF-LIKE MINI CARD ===================== */

.ref-card{
  position: relative;
  width: 100%;
  aspect-ratio: 1 / 1; /* base: overridden in deck grid */
  border-radius: 14px;
  overflow: hidden;
  --rim:#b7b7b7;
  background:
    radial-gradient(120% 90% at 30% 20%, rgba(255,255,255,.10), transparent 55%),
    radial-gradient(140% 120% at 70% 80%, rgba(0,0,0,.55), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.55));
  border: 2px solid rgba(255,255,255,0.10);
  box-shadow:
    0 12px 28px rgba(0,0,0,.55),
    inset 0 1px 0 rgba(255,255,255,.12),
    inset 0 -10px 22px rgba(0,0,0,.55);
  padding: 0;
  cursor: pointer;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
  -webkit-tap-highlight-color: transparent;
}

.ref-card.rarity-5{ --rim:#d8b24a; } /* gold */
.ref-card.rarity-4{ --rim:#7fb3ff; } /* blue */
.ref-card.rarity-3{ --rim:#6fd08f; } /* green */
.ref-card.rarity-2{ --rim:#ff6a4f; } /* red */
.ref-card.rarity-1{ --rim:#b7b7b7; } /* gray */

@supports (color: color-mix(in srgb, #fff 50%, #000 50%)){
  .ref-card{
    border-color: color-mix(in srgb, var(--rim) 70%, #000 30%);
    box-shadow:
      0 0 0 1px rgba(0,0,0,.55),
      0 12px 28px rgba(0,0,0,.55),
      0 0 18px color-mix(in srgb, var(--rim) 25%, transparent),
      inset 0 1px 0 rgba(255,255,255,.12),
      inset 0 -10px 22px rgba(0,0,0,.55);
  }
}

.ref-card::before{
  content:"";
  position:absolute;
  inset: 6px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
  pointer-events:none;
  z-index: 2;
}

.ref-card::after{
  content:"";
  position:absolute;
  inset:-40% -20% auto -20%;
  height:60%;
  background: linear-gradient(180deg, rgba(255,255,255,.14), transparent 65%);
  transform: rotate(-8deg);
  pointer-events:none;
  z-index: 2;
}

.ref-card:active{
  transform: scale(.98);
  filter: brightness(1.08);
}

@media (hover:hover){
  .ref-card:hover{
    transform: translateY(-2px);
    box-shadow:
      0 16px 34px rgba(0,0,0,.60),
      inset 0 1px 0 rgba(255,255,255,.12),
      inset 0 -10px 22px rgba(0,0,0,.55);
  }

  @supports (color: color-mix(in srgb, #fff 50%, #000 50%)){
    .ref-card:hover{
      box-shadow:
        0 0 0 1px rgba(0,0,0,.55),
        0 16px 34px rgba(0,0,0,.60),
        0 0 18px color-mix(in srgb, var(--rim) 30%, transparent),
        inset 0 1px 0 rgba(255,255,255,.12),
        inset 0 -10px 22px rgba(0,0,0,.55);
    }
  }
}

/* арт */
.ref-card__art{
  position:absolute;
  inset: 0;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-color: transparent;
  filter: contrast(1.02) saturate(1.03);
  z-index: 1;
}

/* якщо картинки нема — темний плейсхолдер */
.ref-card__art:empty{
  background:
    radial-gradient(120% 90% at 30% 20%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(140% 120% at 70% 80%, rgba(0,0,0,.55), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.40));
}

.deck-screen .deck-grid .ref-card__art:empty{
  background-image:
    var(--art, none),
    radial-gradient(120% 90% at 30% 20%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(140% 120% at 70% 80%, rgba(0,0,0,.55), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.40));
  background-size: cover, auto, auto, auto;
  background-position: center, 30% 20%, 70% 80%, 0 0;
  background-repeat: no-repeat;
}

/* верхня плашка */
.ref-card__top{
  position:absolute;
  left: 0;
  top: 0;
  height: 22px;
  width: 100%;
  display:flex;
  align-items:center;
  gap: 6px;
  padding: 2px 6px 2px 2px;
  background: rgba(240,230,200,0.92); /* “пергамент” як у рефі */
  border-bottom: 1px solid rgba(0,0,0,0.25);
  z-index: 3;
}

/* маленький квадрат з “типом” (чорна піка/меч) */
.ref-card__type{
  width: 18px;
  height: 18px;
  border-radius: 2px;
  background: rgba(235,235,235,0.95);
  border: 1px solid rgba(0,0,0,0.35);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.30);
  position: relative;
}
.ref-card__type::after{
  content:"";
  position:absolute;
  inset: 3px;
  background: #111;
  -webkit-mask: url("../icons/swords-solid.svg") center / contain no-repeat;
          mask: url("../icons/swords-solid.svg") center / contain no-repeat;
}

/* сила */
.ref-card__power{
  font-family: "EB Garamond", serif;
  font-weight: 900;
  font-size: 16px;
  line-height: 1;
  text-shadow: none;
}

/* елемент-квадрат праворуч внизу */
.ref-card__elem{
  position:absolute;
  right: 4px;
  bottom: 4px;
  width: 18px;
  height: 18px;
  border-radius: 3px;
  border: 2px solid rgba(0,0,0,0.85);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.25);
  z-index: 3;
}
.ref-card__elem::after{
  content:"";
  position:absolute;
  inset: 3px;
  background: rgba(255,255,255,0.95);
}

/* апгрейд-стрілка під картою */
.ref-card__up{
  display:none;
  position:absolute;
  left: 6px;
  bottom: -12px;
  width: 18px;
  height: 18px;
  z-index: 4;
  background: rgba(120,255,120,0.92);
  -webkit-mask: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>\
<path d='M12 3l7 7h-4v8H9v-8H5l7-7z'/>\
</svg>") center / contain no-repeat;
          mask: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>\
<path d='M12 3l7 7h-4v8H9v-8H5l7-7z'/>\
</svg>") center / contain no-repeat;
  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.6));
}
.ref-card.is-upgradable .ref-card__up{ display:block; }

/* ====== ELEMENTS (рамка + колір числа + іконка) ====== */
.elem-earth{ border-color: rgba(60,210,90,0.75); }
.elem-earth .ref-card__power{ color: rgba(60,210,90,0.95); }
.elem-earth .ref-card__elem{ background: rgba(60,210,90,0.10) url('../icons/earth.svg') center/80% no-repeat; }
.elem-earth .ref-card__elem::after{ display: none; }

.elem-water{ border-color: rgba(70,150,255,0.75); }
.elem-water .ref-card__power{ color: rgba(70,150,255,0.95); }
.elem-water .ref-card__elem{ background: rgba(70,150,255,0.10) url('../icons/water.svg') center/80% no-repeat; }
.elem-water .ref-card__elem::after{ display: none; }

.elem-fire{ border-color: rgba(255,90,60,0.78); }
.elem-fire .ref-card__power{ color: rgba(255,90,60,0.95); }
.elem-fire .ref-card__elem{ background: rgba(255,90,60,0.10) url('../icons/fire.svg') center/80% no-repeat; }
.elem-fire .ref-card__elem::after{ display: none; }

.elem-air{ border-color: rgba(245,200,80,0.80); }
.elem-air .ref-card__power{ color: rgba(245,200,80,0.98); }
.elem-air .ref-card__elem{ background: rgba(245,200,80,0.10) url('../icons/air.svg') center/80% no-repeat; }
.elem-air .ref-card__elem::after{ display: none; }

/* ===== REF CARD: crisp black numbers + element gradient top bar ===== */

/* 1) цифри: чорні, “різкі” */
.ref-card__power{
  color: #0b0704;                 /* чорний як у рефі */
  font-weight: 900;
  letter-spacing: 0;
  text-shadow:
    0 1px 0 rgba(255,255,255,0.55); /* легкий хайлайт як у рефі */
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
}

/* 2) плашка зверху: робимо “бейдж” з елементним градієнтом */
.ref-card__top{
  background: linear-gradient(180deg, rgba(245,240,225,0.96), rgba(225,215,190,0.92));
  border-bottom: 1px solid rgba(0,0,0,0.25);
}

/* легка “обводка” по верху як у UI оригіналу */
.ref-card__top::before{
  content:"";
  position:absolute;
  left:0; right:0; top:0;
  height: 2px;
  opacity: 0.95;
  background: rgba(255,255,255,0.35);
}

/* 3) КОЛІРНІ ГРАДІЄНТИ ПЛАШКИ ПО СТИХІЇ */
.elem-fire  .ref-card__top{
  background: linear-gradient(180deg, rgba(255,245,235,0.96), rgba(255,205,195,0.92));
}
.elem-water .ref-card__top{
  background: linear-gradient(180deg, rgba(240,250,255,0.96), rgba(190,220,255,0.92));
}
.elem-earth .ref-card__top{
  background: linear-gradient(180deg, rgba(245,255,245,0.96), rgba(190,235,200,0.92));
}
.elem-air   .ref-card__top{
  background: linear-gradient(180deg, rgba(255,252,240,0.96), rgba(245,220,150,0.92));
}

/* 4) щоб цифри виглядали як у рефі: прибираємо фарбування цифр стихією */
.elem-fire  .ref-card__power,
.elem-water .ref-card__power,
.elem-earth .ref-card__power,
.elem-air   .ref-card__power{
  color: #0b0704;
}

/* 5) маленький “тип” квадрат — чіткіше */
.ref-card__type{
  background: rgba(255,255,255,0.96);
  border: 1px solid rgba(0,0,0,0.40);
}
.ref-card__type::after{
  background: #111;
  opacity: 0.95;
}

/* ===================== RARITY (фон меча / type square) ===================== */
/* rarity-1..6 відповідає: common, uncommon, rare, epic, legendary, mythic */

.ref-card{
  --rar-a: rgba(245,245,245,0.95);
  --rar-b: rgba(200,200,200,0.95);
  --rar-stroke: rgba(0,0,0,0.45);
  --rar-glow: rgba(255,255,255,0.10);
}

/* сам “мечик”-квадратик */
.ref-card .ref-card__type{
  background: linear-gradient(180deg, var(--rar-a), var(--rar-b));
  border-color: var(--rar-stroke);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.35),
    0 0 0 1px rgba(255,255,255,0.08),
    0 8px 16px rgba(0,0,0,0.45),
    0 0 14px var(--rar-glow);
}

/* 1) звичайні (1–4) */
.rarity-1{
  --rar-a: rgba(255,255,255,0.98);
  --rar-b: rgba(215,215,215,0.96);
  --rar-glow: rgba(255,255,255,0.14);
}

/* 2) незвичайні (5–9) */
.rarity-2{
  --rar-a: rgba(80,230,120,0.95);
  --rar-b: rgba(25,130,55,0.92);
  --rar-glow: rgba(80,230,120,0.20);
}

/* 3) рідкісні (10–19) */
.rarity-3{
  --rar-a: rgba(85,170,255,0.96);
  --rar-b: rgba(25,85,170,0.92);
  --rar-glow: rgba(85,170,255,0.20);
}

/* 4) епічні (20–34) */
.rarity-4{
  --rar-a: rgba(200,110,255,0.96);
  --rar-b: rgba(105,35,165,0.92);
  --rar-glow: rgba(200,110,255,0.22);
}

/* 5) легендарні (35–59) */
.rarity-5{
  --rar-a: rgba(255,200,90,0.98);
  --rar-b: rgba(190,110,25,0.93);
  --rar-glow: rgba(255,200,90,0.22);
}

/* 6) міфічні (60–180) */
.rarity-6{
  --rar-a: rgba(255,95,95,0.98);
  --rar-b: rgba(150,25,25,0.93);
  --rar-glow: rgba(255,95,95,0.22);
}

/* маленький квадратик в тайтлбарі карти */
.card-titlebar__elem{ width:20px; height:20px; display:inline-block; margin-right:8px; border-radius:3px; border:2px solid rgba(0,0,0,0.85); box-shadow: inset 0 1px 0 rgba(255,255,255,0.25); }
.card-titlebar__elem.elem-fire  { background: rgba(255,90,60,0.10) url('../icons/fire.svg') center/70% no-repeat; }
.card-titlebar__elem.elem-water { background: rgba(70,150,255,0.10) url('../icons/water.svg') center/70% no-repeat; }
.card-titlebar__elem.elem-earth { background: rgba(90,210,120,0.10) url('../icons/earth.svg') center/70% no-repeat; }
.card-titlebar__elem.elem-air   { background: rgba(245,200,80,0.10) url('../icons/air.svg') center/70% no-repeat; }
/* ===================== OPEN CARD — REF POLISH ===================== */

/* 1) Title ribbon (стрічка з "вусиками") - колір залежить від стихії */
.card-titlebar{
  position: relative;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid rgba(90,210,120,0.25);
  background: linear-gradient(180deg, rgba(50,150,60,0.70), rgba(16,60,20,0.55));
  box-shadow: 0 18px 34px rgba(0,0,0,0.70);
  overflow: hidden;
}
/* Стихійні кольори для titlebar */
.card-titlebar.elem-fire{
  border-color: rgba(255,90,60,0.30);
  background: linear-gradient(180deg, rgba(180,50,30,0.75), rgba(80,20,10,0.60));
}
.card-titlebar.elem-water{
  border-color: rgba(70,150,255,0.30);
  background: linear-gradient(180deg, rgba(40,100,180,0.75), rgba(15,40,80,0.60));
}
.card-titlebar.elem-earth{
  border-color: rgba(90,210,120,0.30);
  background: linear-gradient(180deg, rgba(50,150,60,0.75), rgba(16,60,20,0.60));
}
.card-titlebar.elem-air{
  border-color: rgba(245,200,80,0.30);
  background: linear-gradient(180deg, rgba(160,130,40,0.75), rgba(70,55,15,0.60));
}
.card-titlebar::before,
.card-titlebar::after{
  content:"";
  position:absolute;
  top: 50%;
  width: 18px;
  height: 26px;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.06);
}
.card-titlebar::before{
  left: -10px;
  border-radius: 8px;
}
.card-titlebar::after{
  right: -10px;
  border-radius: 8px;
}
.card-titlebar__title{
  font-family: "EB Garamond", serif;
  font-weight: 900;
  letter-spacing: .2px;
  color: rgba(235,255,225,0.95);
  text-shadow: 0 1px 0 rgba(0,0,0,0.65);
}

/* 2) Card frame: подвійна рамка + легкий glow */
.card-frame{
  border-radius: 10px;
  border-width: 3px;
  position: relative;
}
.card-frame::after{
  content:"";
  position:absolute;
  inset: 3px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.10);
  pointer-events:none;
}
.card-frame.elem-fire { box-shadow: 0 16px 30px rgba(0,0,0,0.70), 0 0 18px rgba(255,90,60,0.14); }
.card-frame.elem-water{ box-shadow: 0 16px 30px rgba(0,0,0,0.70), 0 0 18px rgba(70,150,255,0.14); }
.card-frame.elem-earth{ box-shadow: 0 16px 30px rgba(0,0,0,0.70), 0 0 18px rgba(90,210,120,0.14); }
.card-frame.elem-air  { box-shadow: 0 16px 30px rgba(0,0,0,0.70), 0 0 18px rgba(245,200,80,0.12); }

/* 3) Right meta panel (як чорний блок справа в оригіналі) */
.card-open--ref .card-open__grid{
  grid-template-columns: 130px 1fr; /* квадрат 130x130 */
  gap: 12px;
}
.card-meta{
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.07);
  background:
    linear-gradient(180deg, rgba(0,0,0,0.40), rgba(0,0,0,0.20));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
  padding: 10px;
  position: relative;
  overflow: hidden;
}
.card-meta::before{
  content:"";
  position:absolute;
  left:0; right:0; top:0;
  height: 2px;
  background: linear-gradient(90deg, rgba(90,210,120,0.0), rgba(90,210,120,0.25), rgba(90,210,120,0.0));
  opacity: .9;
}
.card-stats{
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.card-stat{
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.06);
  padding: 8px 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}
.card-stat__icon{
  width: 20px;
  opacity: 0.95;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,0.6));
}
.card-stat__icon--swords{
  height: 20px;
  display: inline-block;
  background: #111;
  -webkit-mask: url("../icons/swords-solid.svg") center / contain no-repeat;
          mask: url("../icons/swords-solid.svg") center / contain no-repeat;
}
.card-stat__label{
  font-family: "EB Garamond", serif;
  font-weight: 600;
  opacity: 0.92;
}
.card-stat__value{
  font-family: "EB Garamond", serif;
  font-weight: 900;
  font-variant-numeric: tabular-nums;
}

/* 4) Action button: визначена через 9-slice нижче (final версія) */

/* 5) Note: зробити як “стрічка під кнопкою” */
.card-note{
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(90,210,120,0.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
}


/* ===== Weak cards list (card-open) ===== */
.weak-cards{
  margin-top: 12px;
  padding: 0;
  border-radius: 12px;
  border: 1px solid rgba(80,190,255,0.20);
  background: rgba(0,0,0,0.18);
  overflow: hidden;
}

.weak-cards__title{
  font-family: "EB Garamond", serif;
  font-weight: 900;
  color: rgba(235,255,225,0.92);
  text-align: center;
  padding: 10px 12px;
  background: linear-gradient(180deg, rgba(110,210,255,0.65), rgba(60,140,200,0.55));
  border-bottom: 1px solid rgba(255,255,255,0.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.12);
  text-shadow: 0 1px 0 rgba(0,0,0,0.65);
}

.weak-cards__grid{
  display: grid;
  grid-template-columns: repeat(2, 110px);
  justify-content: center;
  gap: 14px 18px;
  padding: 14px 12px 12px;
}

.weak-card{
  display:flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.weak-card .ref-card{
  width: 74px;
  height: 74px;
  border-radius: 10px;
}

.weak-card__absorb{
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
  font-family: "EB Garamond", serif;
  font-weight: 900;
  color: rgba(140,210,255,0.92);
  text-decoration: underline;
  cursor: pointer;
}
.weak-card__absorb:hover{ color: rgba(170,230,255,0.95); }

.weak-card__pct{
  font-family: "EB Garamond", serif;
  font-weight: 900;
  color: rgba(120,255,120,0.95);
}

@media (max-width: 360px){
  .weak-cards__grid{
    grid-template-columns: repeat(2, 1fr);
  }
}

/* 6) Rail menu: визначена через 9-slice нижче (final версія) */
.rail-item__orb{
  width: 12px;
  height: 12px;
  background: rgba(120,255,120,0.88);
  box-shadow: 0 0 0 2px rgba(0,0,0,0.38), 0 0 12px rgba(120,255,120,0.20);
}
.rail-item:active{ transform: translateY(1px); }

/* ===== Rail buttons: версія визначена через 9-slice нижче ===== */
.rail-menu{ display:flex; flex-direction:column; gap:10px; }

/* ===================== CARD FRAME: match deck ref-card look (no power banner) ===================== */
.card-frame{
  background: #101010; /* same as ref-card */
  border: 3px solid rgba(255,255,255,0.08);
  box-shadow: 0 14px 28px rgba(0,0,0,0.65);
  padding: 0;
}

/* element-colored border for card-frame (like in deck) */
.elem-earth .card-frame{ border-color: rgba(60,210,90,0.75); }
.elem-water .card-frame{ border-color: rgba(70,150,255,0.75); }
.elem-fire  .card-frame{ border-color: rgba(255,90,60,0.78); }
.elem-air   .card-frame{ border-color: rgba(245,200,80,0.80); }

/* ensure art keeps proportions (no crop) */
.card-frame__art{ inset:0; width:100%; height:100%; background-size:contain; background-position:center; background-repeat:no-repeat; }





/* ===== Open card screen ===== */
.card-open-screen{ padding-top: calc(var(--hudH) + 12px); }

.card-open{ padding: 12px; }

.card-detail .card-open.panel{
  border-radius: 18px;
  background: rgba(0,0,0,.45);
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 18px 40px rgba(0,0,0,.55);
  padding: 16px;
}
.card-detail .card-open.panel::before{ display:none; }

.card-open__grid{
  display:grid;
  grid-template-columns: 130px 1fr;
  gap: 12px;
  align-items:start;
}

.card-frame{
  width: 130px;
  aspect-ratio: 1 / 1;
  border-radius: 10px;
  overflow:hidden;
  border: 3px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.35);
  box-shadow: 0 16px 30px rgba(0,0,0,0.70);
}
.card-frame__art{
  width:100%; height:100%;
  background-size: contain;
  background-position:center;
  background-repeat: no-repeat;
}

.card-divider{
  height:1px;
  background: rgba(80,190,255,0.14);
  margin: 12px 0 10px;
}

.card-bio{
  margin-top: 10px;
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.07);
  background: rgba(0,0,0,0.18);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
  color: rgba(244,233,212,0.92);
}
.card-bio__text{
  margin: 0;
  font-family: "EB Garamond", serif;
  font-size: 15px;
  line-height: 1.55;
  opacity: 0.95;
  color: inherit;
  letter-spacing: 0;
  text-rendering: geometricPrecision;
  overflow-wrap: anywhere;
  word-break: break-word;
}
.card-bio__p{
  margin: 0;
}
.card-bio__p + .card-bio__p{
  margin-top: 10px;
}
.card-bio__p.is-muted{
  opacity: 0.85;
}

/* .card-action визначена нижче через 9-slice (final версія) */

.card-note{
  margin-top:10px;
  padding: 10px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.07);
  background: rgba(0,0,0,0.18);
  font-family: "EB Garamond", serif;
  font-size: 13px;
  opacity: 0.90;
}

/* елементний квадратик у заголовку */
.card-titlebar__elem.elem-fire  { background: rgba(255,90,60,0.10) url('../icons/fire.svg') center/70% no-repeat; }
.card-titlebar__elem.elem-water { background: rgba(70,150,255,0.10) url('../icons/water.svg') center/70% no-repeat; }
.card-titlebar__elem.elem-earth { background: rgba(90,210,120,0.10) url('../icons/earth.svg') center/70% no-repeat; }
.card-titlebar__elem.elem-air   { background: rgba(245,200,80,0.10) url('../icons/air.svg') center/70% no-repeat; }

/* ===================== PNG TEXTURED BUTTONS ===================== */

/* базовий шаблон "текстурної" кнопки */
.btn-textured{
  position: relative;
  overflow: hidden;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 18px 34px rgba(0,0,0,0.65);
  background-color: rgba(0,0,0,0.25); /* fallback якщо png не знайдено */
}

/* шар текстури (PNG) */
.btn-textured::before{
  content:"";
  position:absolute;
  inset: 0;
  background-image: var(--btn-tex);
  background-size: cover;      /* або contain, якщо треба */
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.95;
  pointer-events:none;
}

/* поверх текстури легкий “пластик/метал” градієнт */
.btn-textured::after{
  content:"";
  position:absolute;
  inset: 0;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.10), rgba(0,0,0,0.20));
  pointer-events:none;
}

/* текст/контент завжди зверху */
.btn-textured > *{
  position: relative;
  z-index: 1;
}

/* актив/натиск */
.btn-textured:active{
  transform: translateY(1px);
}

/* ===================== ЗАСТОСУВАННЯ ===================== */

/* OLD 1) Зелена кнопка дії — ЗАМІНЕНА НА 9-slice (дивись нижче в кінці) */
/* ВИДАЛЕНО: конфліктуючи ::before/::after стилі */

/* OLD 2) Сині "рейли" меню — ЗАМІНЕНА НА 9-slice (дивись нижче в кінці) */
/* ВИДАЛЕНО: конфліктуючи ::before/::after стилі */

/* OLD 3) Універсальні кнопки — ЗАМІНЕНА НА 9-slice (дивись нижче в кінці) */
/* ВИДАЛЕНО: конфліктуючи ::before/::after стилі */

/* ===================== 9-slice textured buttons (final) ===================== */
/* Текстура займає 100% контейнера через ::before pseudo-element */

/* Зелена кнопка дії: .card-action (з оливково-зеленою текстурою) */
.card-action{
  box-sizing: border-box;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;

  min-height: 64px;
  padding: 0;

  color: rgba(235,255,225,0.95);
  text-shadow: 0 1px 0 rgba(0,0,0,0.65);
  font-family: "EB Garamond", serif;
  font-weight: 700;
  border-radius: 12px;
  border: 1px solid rgba(90,210,120,0.25);
  background: linear-gradient(180deg, rgba(40,120,40,0.78), rgba(16,60,16,0.55));
  box-shadow: 0 18px 34px rgba(0,0,0,0.65);
  cursor: pointer;
}

/* Текстура оливково-зелена */
.card-action::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-green);
  background-size: cover;
  background-position: center;
  opacity: 0.6;
  pointer-events: none;
  z-index: 0;
}

/* Shine ефект */
.card-action::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
  transition: all 0.3s ease;
  z-index: 1;
  pointer-events: none;
}

.card-action:hover::after {
  left: 100%;
}

/* Disabled state for the main card action button */
.card-action:disabled{
  opacity: 0.55;
  cursor: not-allowed;
  transform: none;
}
.card-action:disabled::after{
  display:none;
}

/* Внутрішній контейнер для текста (зверху текстури) */
.card-action > span,
.card-action > *{
  padding: 0 16px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  position: relative;
  z-index: 2;
  color: rgba(235,255,225,0.95);
}

/* Синя кнопка меню: .rail-item (Бойова колода, тощо) */
.rail-item{
  box-sizing: border-box;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  position: relative;
  overflow: hidden;

  min-height: 76px;
  padding: 0;

  color: rgba(235,255,225,0.95);
  text-shadow: 0 1px 0 rgba(0,0,0,0.65);
  font-family: "EB Garamond", serif;
  font-weight: 700;
  border-radius: 12px;
  border: none;
  background: linear-gradient(180deg, rgba(20,70,110,0.75), rgba(10,35,65,0.75));
  box-shadow: 0 14px 26px rgba(0,0,0,0.65);
  gap: 10px;
  cursor: pointer;
  transition: transform 0.1s ease;
}

/* Текстура синьої кнопки */
.rail-item::before{
  content: "";
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-blue);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: 12px;
  pointer-events: none;
  opacity: 0.55;
}

.rail-item:active{ transform: translateY(1px); }

/* Зелений orb праворуч як в рефі */
.rail-item__orb{
  display: inline-block;
  width: 12px;
  height: 12px;
  margin-left: auto;
  margin-right: 14px;
  border-radius: 999px;
  background: rgba(120,255,120,0.88);
  box-shadow: 0 0 0 2px rgba(0,0,0,0.45), 0 0 14px rgba(120,255,120,0.25);
  flex: 0 0 auto;
}

/* Внутрішній контейнер для .rail-item (зверху текстури) */
.rail-inner,
.rail-item > span,
.rail-item > *{
  padding: 0 18px;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: 10px;
  position: relative;
  z-index: 1;
}


/* ===================== ELEMENT FRAME TOKENS (final override) ===================== */

:root{
  --elem-fire:  rgba(255, 90, 60, 0.85);
  --elem-water: rgba( 70,150,255, 0.85);
  --elem-earth: rgba( 90,210,120, 0.85);
  --elem-air:   rgba(245,200, 80, 0.85);
}

/* Елемент задає один колір, а всі компоненти беруть його з --elemC */
.elem-fire  { --elemC: var(--elem-fire); }
.elem-water { --elemC: var(--elem-water); }
.elem-earth { --elemC: var(--elem-earth); }
.elem-air   { --elemC: var(--elem-air); }

/* 1) РАМКА АРТА на екрані відкритої карти */
.card-frame{
  border: 3px solid rgba(255,255,255,0.10); /* дефолт */
  box-shadow: 0 16px 30px rgba(0,0,0,0.70);
}
.card-frame.elem-fire,
.card-frame.elem-water,
.card-frame.elem-earth,
.card-frame.elem-air{
  border-color: var(--elemC);
  box-shadow:
    0 16px 30px rgba(0,0,0,0.70),
    0 0 18px color-mix(in srgb, var(--elemC) 25%, transparent);
}

/* 2) Квадратик стихії в заголовку (ліва іконка) */
.card-titlebar__elem{
  background: rgba(255,255,255,0.12);
  border: 2px solid rgba(0,0,0,0.85);
}
.card-titlebar__elem.elem-fire{
  background: rgba(255,90,60,0.10) url('../icons/fire.svg') center/70% no-repeat;
}
.card-titlebar__elem.elem-water{
  background: rgba(70,150,255,0.10) url('../icons/water.svg') center/70% no-repeat;
}
.card-titlebar__elem.elem-earth{
  background: rgba(90,210,120,0.10) url('../icons/earth.svg') center/70% no-repeat;
}
.card-titlebar__elem.elem-air{
  background: rgba(245,200,80,0.10) url('../icons/air.svg') center/70% no-repeat;
}

/* 3) Акцент-лінія в правій панелі статів — теж по стихії (як у рефі) */
.card-meta::before{
  background: linear-gradient(
    90deg,
    transparent,
    color-mix(in srgb, var(--elemC) 35%, transparent),
    transparent
  );
}

/* 4) Кнопка дії: 9-slice текстура займає 100%, додаткові стилі не потрібні */

/* ===== SHOP PAGE ===== */

.shop-titlebar {
  background: linear-gradient(90deg, rgba(90,140,60,0.7), rgba(60,100,40,0.8));
  border: 2px solid rgba(120,170,80,0.6);
  border-radius: var(--r);
  padding: 12px 18px;
  margin-bottom: 20px;
  text-align: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
}

.shop-titlebar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
}

.shop-titlebar__title {
  font-size: 24px;
  font-weight: 800;
  font-family:"UnifrakturMaguntia", serif;
  letter-spacing: .8px;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
}

.shop-titlebar__controls{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-top:10px;
}

.shop-currency-toggle{
  appearance:none;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.22);
  color: rgba(244,233,212,0.92);
  padding: 8px 12px;
  border-radius: 999px;
  font-family: "EB Garamond", serif;
  font-weight: 700;
  letter-spacing: .3px;
  cursor: pointer;
  transition: transform .08s ease, background .18s ease, border-color .18s ease;
}
.shop-currency-toggle:hover{
  border-color: rgba(255,255,255,0.3);
  background: rgba(0,0,0,0.28);
}
.shop-currency-toggle:active{
  transform: translateY(1px);
}
.shop-currency-toggle.is-active{
  border-color: rgba(255,200,50,0.45);
  background: rgba(255,200,50,0.12);
  color: rgba(255,240,210,0.95);
}

.shop-promo {
  background: linear-gradient(135deg, rgba(255,200,50,0.15), rgba(184,148,70,0.1));
  border: 2px solid rgba(255,200,50,0.3);
  border-radius: var(--r);
  padding: 16px 18px;
  margin-bottom: 24px;
  position: relative;
  overflow: hidden;
}

.shop-promo::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(255,200,50,0.5), transparent);
}

.shop-promo__title {
  font-size: 18px;
  font-weight: 700;
  color: #ffc832;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  margin-bottom: 6px;
  letter-spacing: 0.5px;
}

.shop-promo__desc {
  font-size: 13px;
  color: rgba(244,233,212,0.8);
  font-family: "EB Garamond", serif;
  line-height: 1.4;
}

.shop-section {
  margin-bottom: 20px;
}

.shop-section__title {
  font-size: 16px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin-bottom: 14px;
  padding-bottom: 8px;
  border-bottom: 2px solid rgba(184,148,70,0.3);
  letter-spacing: 0.5px;
}

.shop-result-screen{
  padding-top: calc(var(--hudH) + 18px);
}

.shop-result{
  padding: 14px 14px 16px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.shop-result__title{
  font-family: "EB Garamond", serif;
  font-weight: 900;
  text-align: center;
  color: rgba(235,255,255,0.95);
  text-shadow: 0 1px 0 rgba(0,0,0,0.65);
}

.shop-result__subtitle{
  font-family: "EB Garamond", serif;
  font-size: 13px;
  text-align: center;
  color: rgba(244,233,212,0.90);
  opacity: 0.95;
}

.shop-result__card{
  display: flex;
  justify-content: center;
  padding: 6px 0 2px;
  width: 100%;
}

.shop-result__banners{
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.shop-result__banner{
  width: 100%;
  border-radius: 10px;
  padding: 10px 12px;
  text-align: center;
  font-family: "EB Garamond", serif;
  font-weight: 800;
  letter-spacing: 0.2px;
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 16px 26px rgba(0,0,0,0.55);
}

.shop-result__banner.is-green{
  background: linear-gradient(180deg, rgba(45,145,45,0.92), rgba(10,55,10,0.70));
  color: rgba(235,255,235,0.97);
}

.shop-result__banner.is-blue{
  background: linear-gradient(180deg, rgba(40,125,185,0.82), rgba(10,40,80,0.68));
  color: rgba(235,255,255,0.97);
}

.shop-result__banner.is-gold{
  background: linear-gradient(180deg, rgba(184,148,70,0.92), rgba(50,35,10,0.75));
  color: rgba(255,250,235,0.97);
}

.shop-result__single{
  display: flex;
  justify-content: center;
}

.shop-result__grid{
  display: grid;
  grid-template-columns: repeat(2, auto);
  gap: 10px;
  padding: 14px;
  border-radius: 12px;
  background:
    radial-gradient(circle at 50% 45%, rgba(80,190,255,0.22), transparent 58%),
    radial-gradient(circle at 50% 45%, rgba(0,0,0,0.30), rgba(0,0,0,0.12));
  border: 1px solid rgba(255,255,255,0.08);
}

.shop-result__buy{
  width: 220px;
  min-height: 52px;
  border-radius: 12px;
  border: 1px solid rgba(80,190,255,0.22);
  background: linear-gradient(180deg, rgba(40,125,185,0.72), rgba(10,40,80,0.62));
  color: rgba(235,255,255,0.95);
  font-family: "EB Garamond", serif;
  font-weight: 800;
  text-shadow: 0 1px 0 rgba(0,0,0,0.65);
  box-shadow: 0 16px 28px rgba(0,0,0,0.65);
  cursor: pointer;
}

.shop-result__meta{
  width: 100%;
  max-width: 720px;
  display: grid;
  gap: 8px;
  margin-top: 2px;
}

.shop-result__price{
  font-family: "EB Garamond", serif;
  font-size: 13px;
  color: rgba(244,233,212,0.90);
  text-align: center;
}

.shop-result__chances{
  border: 1px solid rgba(255,255,255,0.07);
  background: rgba(0,0,0,0.18);
  border-radius: 10px;
  padding: 10px 12px;
  color: rgba(244,233,212,0.92);
}

.shop-result__chances-title{
  font-family: "EB Garamond", serif;
  font-weight: 700;
  margin-bottom: 8px;
  color: rgba(235,255,255,0.92);
}

.shop-result__chance{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  padding: 4px 0;
  border-top: 1px solid rgba(255,255,255,0.06);
}
.shop-result__chance:first-child{ border-top: 0; }
.shop-result__chance.is-muted{ opacity: 0.8; }
.shop-result__chance-label{ opacity: 0.95; }
.shop-result__chance-value{ color: var(--heraldic-gold); }

.shop-result__note{
  font-family: "EB Garamond", serif;
  font-size: 12px;
  text-align: center;
  color: rgba(160,230,170,0.95);
  opacity: 0.95;
}

.shop-result__back{
  width: 100%;
  max-width: 720px;
  margin-top: 4px;
}

.shop-card-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.shop-card {
  display: grid;
  grid-template-columns: 60px 1fr auto;
  gap: 12px;
  align-items: stretch;
  padding: 12px;
  background: linear-gradient(135deg, rgba(58,51,41,0.7), rgba(45,40,30,0.8));
  border: 2px solid var(--stone-dark);
  border-radius: var(--r-small);
  position: relative;
  overflow: hidden;
  transition: all 0.25s ease;
}

.shop-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(184,148,70,0.4), transparent);
}

.shop-card:hover {
  border-color: var(--heraldic-gold);
  background: linear-gradient(135deg, rgba(70,63,50,0.8), rgba(55,50,38,0.9));
  box-shadow: 
    0 8px 20px var(--shadow),
    inset 0 1px 0 rgba(255,255,255,0.05);
}

.shop-card__art {
  width: 60px;
  height: 60px;
  border: 2px solid rgba(184,148,70,0.4);
  border-radius: var(--r-small);
  overflow: hidden;
  background: rgba(0,0,0,0.3);
}

.shop-card__art img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.shop-card__info {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 6px;
  min-width: 0;
}

.shop-card__name {
  font-size: 14px;
  font-weight: 700;
  color: rgba(255,165,0,0.9);
  letter-spacing: 0.3px;
  display: flex;
  align-items: center;
  gap: 8px;
  line-height: 1.2;
}

.shop-card__rarity {
  display: inline-block;
  background: rgba(255,50,50,0.9);
  color: #fff;
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 11px;
  font-weight: 700;
  flex-shrink: 0;
}

.shop-card__desc {
  font-size: 12px;
  color: rgba(244,233,212,0.7);
  font-family: "EB Garamond", serif;
  margin: 0;
  line-height: 1.3;
}

.shop-odds{
  display:block;
  margin-top: 6px;
  color: rgba(244,233,212,0.85);
}

.shop-card__link {
  color: var(--heraldic-blue);
  text-decoration: none;
  font-weight: 600;
  border-bottom: 1px solid var(--heraldic-blue);
  transition: all 0.2s ease;
}

.shop-card__link:hover {
  color: rgba(42,79,110,0.8);
}

.shop-card__footer {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: center;
  gap: 2px;
  min-width: 50px;
  padding: 6px;
  background: rgba(0,0,0,0.2);
  border-radius: var(--r-small);
  border-left: 2px solid rgba(184,148,70,0.3);
}

.shop-card__price {
  font-size: 16px;
  font-weight: 700;
  color: var(--heraldic-gold);
  line-height: 1;
}

.shop-card__currency {
  font-size: 14px;
  line-height: 1;
}

.shop-card__btn {
  grid-column: 1 / -1;
  padding: 10px 14px;
  background: transparent;
  color: #1a1a1a;
  border: 1px solid #8b7355;
  border-radius: var(--r-small);
  font-size: 13px;
  font-weight: 700;
  font-family: "EB Garamond", serif;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

/* Текстура пергаменту */
.shop-card__btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  opacity: 1;
  pointer-events: none;
  z-index: 0;
}

/* Shine ефект */
.shop-card__btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.3s ease;
  z-index: 1;
}

/* Текст зверху */
.shop-card__btn {
  color: #1a1a1a;
}

.shop-card__btn > * {
  position: relative;
  z-index: 2;
  color: #1a1a1a;
}

.shop-card__btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
}

.shop-card__btn:hover::after {
  left: 100%;
}

.shop-card__btn:active {
  transform: scale(0.98);
}

.shop-card__btn-price {
  font-weight: 700;
  color: #8b5a00;
}

/* ===== Shop reference skin (without final background image) ===== */
.shop-screen{
  background:
    var(--shop-bg, none),
    radial-gradient(110% 120% at 92% 0%, rgba(255, 118, 26, 0.1), transparent 56%),
    radial-gradient(90% 110% at 8% 100%, rgba(40, 150, 255, 0.08), transparent 52%);
  background-size: cover, auto, auto;
  background-repeat: no-repeat, no-repeat, no-repeat;
  background-position: center top, center, center;
}

.shop-screen .shop-section__title{
  display: none;
}

.shop-card{
  grid-template-columns: 72px 1fr auto;
  gap: 10px 12px;
  align-items: center;
  border: 1px solid rgba(255, 162, 48, 0.72);
  border-radius: 10px;
  padding: 10px;
  background: linear-gradient(90deg, rgba(7, 8, 10, 0.95), rgba(12, 13, 16, 0.9));
  box-shadow: 0 10px 18px rgba(0, 0, 0, 0.55);
}

.shop-card[data-offer-id="gold_150"]{
  background:
    radial-gradient(125% 100% at 88% 20%, rgba(170, 26, 0, 0.48), transparent 58%),
    linear-gradient(90deg, rgba(7, 8, 10, 0.96), rgba(25, 8, 6, 0.92));
}

.shop-card[data-offer-id="gold_50"]{
  background:
    radial-gradient(125% 100% at 88% 20%, rgba(125, 18, 180, 0.45), transparent 58%),
    linear-gradient(90deg, rgba(8, 8, 14, 0.96), rgba(26, 9, 38, 0.92));
}

.shop-card[data-offer-id="silver_500"]{
  background:
    radial-gradient(125% 100% at 88% 20%, rgba(18, 120, 32, 0.44), transparent 58%),
    linear-gradient(90deg, rgba(8, 12, 10, 0.96), rgba(8, 26, 12, 0.92));
}

.shop-card::before{
  opacity: 0;
}

.shop-card__art{
  width: 70px;
  height: 70px;
  border: 2px solid rgba(255, 220, 165, 0.82);
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.75);
}

.shop-card__name{
  margin-bottom: 4px;
  font-size: 19px;
  line-height: 1.05;
  font-family: "Forum", "EB Garamond", serif;
  font-weight: 700;
  letter-spacing: 0.1px;
  color: #ff9f30;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.7);
}

.shop-card[data-offer-id="gold_50"] .shop-card__name{
  color: #f044ff;
}

.shop-card[data-offer-id="silver_500"] .shop-card__name{
  color: #68ff6a;
}

.shop-card__rarity{
  display: inline-block;
  margin-right: 8px;
  min-width: 58px;
  text-align: center;
  background: linear-gradient(180deg, #ff4636, #ae1200);
  border: 1px solid rgba(255, 255, 255, 0.28);
  border-radius: 4px;
  padding: 1px 7px;
  color: #fff6f2;
  font-size: 12px;
  font-weight: 800;
  line-height: 1.15;
  white-space: nowrap;
  vertical-align: middle;
}

.shop-card[data-offer-id="silver_500"] .shop-card__rarity{
  background: linear-gradient(180deg, #c94bff, #6f1aa3);
  border-color: rgba(255, 220, 255, 0.38);
}

.shop-card__desc{
  color: rgba(245, 240, 228, 0.95);
  font-size: 12px;
  line-height: 1.3;
}

.shop-odds{
  display: block;
  margin-top: 2px;
  color: rgba(255, 255, 255, 0.98);
}

.shop-odds-list{
  display: flex;
  flex-direction: column;
  gap: 1px;
  margin-top: 1px;
}

.shop-card__more{
  display: inline-block;
  margin-top: 2px;
  color: #2cc8ff;
  text-decoration: none;
  font-size: 12px;
  font-weight: 700;
}

.shop-card__more:hover{
  color: #86e4ff;
  text-decoration: underline;
}

.shop-card__footer{
  min-width: 72px;
  padding: 6px 8px;
  border-left: 1px solid rgba(255, 194, 94, 0.55);
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.24);
  align-items: center;
}

.shop-card__price{
  color: #f0be4e;
  font-size: 34px;
  font-weight: 800;
  line-height: 1;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.72);
}

.shop-card__btn{
  justify-self: center;
  grid-column: 1 / -1;
  width: min(68%, 280px);
  min-height: 36px;
  padding: 6px 14px;
  border-radius: 10px;
  border: 1px solid rgba(116, 255, 116, 0.6);
  background: linear-gradient(180deg, rgba(82, 210, 64, 0.98), rgba(18, 82, 24, 0.95));
  color: #eaffea;
  font-size: 16px;
  font-weight: 800;
  line-height: 1.1;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.75);
  box-shadow:
    0 6px 14px rgba(0, 0, 0, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.22);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

.shop-card[data-offer-id="silver_500"] .shop-card__btn{
  border-color: rgba(90, 185, 255, 0.62);
  background: linear-gradient(180deg, rgba(50, 154, 231, 0.98), rgba(14, 56, 104, 0.95));
  color: #eaf6ff;
}

.shop-card__btn::before,
.shop-card__btn::after{
  display: none;
}

.shop-card__btn:hover{
  transform: translateY(-1px);
  filter: brightness(1.04);
}

.shop-card__btn:active{
  transform: translateY(0);
  filter: brightness(0.98);
}

.shop-card__btn > *{
  color: inherit;
}

.shop-card__btn-label{
  font-weight: 700;
}

.shop-card__btn-coin{
  width: 14px;
  height: 14px;
  object-fit: contain;
  display: inline-block;
  transform: translateY(1px);
}

.shop-card__btn-price{
  color: inherit;
  font-weight: 900;
}

.shop-back-link{
  margin-top: 10px;
  display: block;
  width: 100%;
  border-radius: 10px;
  border: 1px solid rgba(80, 190, 255, 0.56);
  background: linear-gradient(180deg, rgba(32, 136, 197, 0.95), rgba(12, 56, 104, 0.95));
  color: #dcf4ff;
  text-decoration: none;
  font-size: 17px;
  font-family: "Forum", "EB Garamond", serif;
  font-weight: 700;
  text-align: left;
  padding: 8px 12px;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.75);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
}

.shop-back-link:hover{
  filter: brightness(1.05);
}

.shop-pool-screen{
  padding-top: calc(var(--hudH) + 12px);
}

.shop-pool-head{
  margin-bottom: 8px;
}

.shop-pool-title{
  text-align: center;
  color: #f0e0b6;
  font-family: "Forum", "EB Garamond", serif;
  font-size: 24px;
  font-weight: 700;
}

.shop-pool-panel{
  border: 1px solid rgba(48, 180, 255, 0.55);
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(5,8,12,0.94), rgba(8,12,20,0.92));
  padding: 10px 10px 12px;
}

.shop-pool-subtitle{
  margin: 0 0 8px;
  font-size: 20px;
  text-align: center;
  color: #edf4ff;
  font-family: "EB Garamond", serif;
}

.shop-pool-odds{
  display: grid;
  gap: 6px;
}

.shop-pool-odds__row{
  display: flex;
  align-items: center;
  gap: 8px;
  line-height: 1.1;
  font-size: 14px;
}

.shop-pool-odds__pct{
  min-width: 56px;
  text-align: center;
  border-radius: 4px;
  padding: 2px 6px;
  color: #fff;
  font-weight: 800;
  border: 1px solid rgba(255,255,255,0.28);
  background: linear-gradient(180deg, #ff4636, #ae1200);
}

.shop-pool-odds__row.is-epic .shop-pool-odds__pct{
  background: linear-gradient(180deg, #c94bff, #6f1aa3);
}

.shop-pool-odds__row.is-rare .shop-pool-odds__pct{
  background: linear-gradient(180deg, #38bdff, #0f4d9f);
}

.shop-pool-odds__text{
  color: rgba(244,233,212,0.95);
}

.shop-pool-buy{
  margin: 10px auto 0;
  display: block;
  width: min(72%, 300px);
  min-height: 38px;
  border-radius: 10px;
  border: 1px solid rgba(116, 255, 116, 0.6);
  background: linear-gradient(180deg, rgba(82, 210, 64, 0.98), rgba(18, 82, 24, 0.95));
  color: #eaffea;
  font-size: 28px;
  font-family: "EB Garamond", serif;
  font-weight: 800;
  line-height: 1.1;
  cursor: pointer;
}

.shop-pool-note{
  margin: 10px 0 8px;
  text-align: center;
  color: #f5b23f;
  font-family: "EB Garamond", serif;
}

.shop-pool-note__line{
  line-height: 1.2;
}

.shop-pool-sections{
  padding: 8px 0;
}

.shop-pool-now{
  text-align: center;
  color: #eef4ff;
  margin-bottom: 8px;
  font-size: 26px;
}

.shop-pool-section{
  margin-bottom: 12px;
}

.shop-pool-section__title{
  margin: 0 0 6px;
  text-align: center;
  font-size: 34px;
  font-family: "EB Garamond", serif;
  font-weight: 700;
}

.shop-pool-section__title.is-uncommon{ color: #6dff68; }
.shop-pool-section__title.is-rare{ color: #45c3ff; }
.shop-pool-section__title.is-epic{ color: #d35bff; }
.shop-pool-section__title.is-legendary{ color: #ffb145; }
.shop-pool-section__title.is-mythic{ color: #ff4d3a; }

.shop-pool-grid{
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}

.shop-pool-card{
  cursor: pointer;
}

.shop-pool-card .ref-card{
  width: 100%;
  aspect-ratio: 1 / 1;
  height: auto;
}

.shop-pool-art{
  width: 100%;
  aspect-ratio: 1 / 1;
  border: 1px solid rgba(55, 195, 255, 0.62);
  border-radius: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  box-shadow: 0 2px 8px rgba(0,0,0,0.35);
}

.shop-pool-modal{
  position: fixed;
  inset: 0;
  z-index: 120;
  display: none;
}

.shop-pool-modal.is-open{
  display: block;
}

.shop-pool-modal__backdrop{
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.72);
}

.shop-pool-modal__panel{
  position: absolute;
  left: 50%;
  top: calc(var(--hudH) + 12px);
  width: min(100vw - 20px, 390px);
  max-height: calc(100vh - var(--hudH) - var(--botH) - 26px);
  overflow: auto;
  transform: translateX(-50%);
  border: 1px solid rgba(80, 190, 255, 0.64);
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(4, 8, 12, 0.98), rgba(8, 12, 16, 0.97));
  box-shadow: 0 20px 38px rgba(0,0,0,0.65);
  padding: 10px 10px 12px;
}

.shop-pool-modal__head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.shop-pool-modal__title{
  margin: 0;
  font-family: "EB Garamond", serif;
  color: #a8ebff;
  font-size: 24px;
  line-height: 1.1;
}

.shop-pool-modal__close{
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: 1px solid rgba(255,255,255,0.2);
  background: rgba(255,255,255,0.08);
  color: #fff;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
}

.shop-pool-modal__art{
  margin: 8px auto 0;
  width: 140px;
  height: 140px;
  border: 1px solid rgba(90, 220, 255, 0.6);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.shop-pool-modal__bio{
  margin: 10px 4px 0;
  color: rgba(244,233,212,0.96);
  font-size: 26px;
  line-height: 1.2;
}

.shop-pool-modal__belongs{
  margin-top: 10px;
  border-top: 1px solid rgba(255,255,255,0.14);
  padding-top: 8px;
}

.shop-pool-modal__subtitle{
  margin: 0 0 6px;
  font-family: "EB Garamond", serif;
  color: #62d0ff;
  font-size: 28px;
}

.shop-pool-modal__list{
  margin: 0;
  padding-left: 18px;
  color: rgba(244,233,212,0.96);
  font-size: 24px;
  line-height: 1.3;
}

.shop-card-screen{
  padding-top: calc(var(--hudH) + 10px);
}

.shop-card-info{
  border: 1px solid rgba(80, 190, 255, 0.64);
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(4,8,12,0.97), rgba(7,10,15,0.96));
  padding: 10px;
}

.shop-card-info__titlebar{
  border: 1px solid rgba(120, 228, 255, 0.4);
  border-radius: 6px;
  background: linear-gradient(180deg, rgba(67, 175, 214, 0.85), rgba(24, 96, 125, 0.92));
  padding: 4px 10px;
}

.shop-card-info__title{
  display: block;
  text-align: center;
  color: #06181f;
  font-family: "EB Garamond", serif;
  font-size: 25px;
  font-weight: 700;
}

.shop-card-info__art{
  margin: 10px auto 0;
  width: 160px;
  height: 160px;
  border: 2px solid rgba(255, 214, 110, 0.75);
  border-radius: 6px;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.shop-card-info__bio{
  margin: 10px 0 0;
  color: rgba(244,233,212,0.95);
  font-size: 26px;
  line-height: 1.18;
}

.shop-card-info__status{
  margin-top: 10px;
  border-top: 1px solid rgba(255,255,255,0.18);
  border-bottom: 1px solid rgba(255,255,255,0.18);
  padding: 6px 0;
  text-align: center;
  color: rgba(245,240,228,0.97);
  font-size: 24px;
}

.shop-card-info__section-title{
  margin-top: 8px;
  text-align: center;
  color: #67d6ff;
  font-size: 30px;
  line-height: 1.12;
}

.shop-card-info__collections{
  margin-top: 6px;
  display: grid;
  gap: 10px;
}

.shop-card-info__collection{
  border-top: 1px solid rgba(255,255,255,0.13);
  padding-top: 8px;
}

.shop-card-info__collection-link{
  display: block;
  text-align: center;
  color: #a8ebff;
  text-decoration: none;
  font-size: 26px;
}

.shop-card-info__collection-link:hover{
  text-decoration: underline;
}

.shop-card-info__bonus{
  margin-top: 6px;
  text-align: center;
  color: rgba(244,233,212,0.95);
  font-size: 23px;
  line-height: 1.2;
}

.shop-card-info__empty{
  text-align: center;
  color: rgba(244,233,212,0.95);
  font-size: 22px;
}

.shop-rules{
  border: 1px solid rgba(255, 201, 96, 0.38);
  border-radius: 10px;
  padding: 10px 12px;
  background:
    radial-gradient(120% 90% at 0% 0%, rgba(255, 180, 60, 0.12), transparent 56%),
    linear-gradient(180deg, rgba(9, 11, 14, 0.92), rgba(10, 13, 16, 0.92));
  color: rgba(245, 240, 228, 0.95);
  font-size: 13px;
  line-height: 1.35;
}

.shop-rules p + p{
  margin-top: 8px;
}

#shop-rules{
  scroll-margin-top: calc(var(--hudH) + 12px);
}

/* ===================== DUEL START SCREEN ===================== */

/* ===== Main Screen ===== */
.duel-start {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* ===== Зелена стрічка ===== */
.duel-banner {
  padding: 10px;
  text-align: center;
  font-weight: 800;
  border-radius: 10px;
  background: linear-gradient(180deg, #3f8f3f, #1e4f1e);
  color: #eaffea;
  border: 1px solid rgba(80, 190, 255, 0.25);
  box-shadow: 0 10px 22px var(--shadow);
  font-size: 14px;
  letter-spacing: 0.5px;
}

/* ===== Опонент ===== */
.duel-opponent {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.duel-opponent__avatar {
  width: 36px;
  height: 36px;
  border-radius: 6px;
  background: rgba(80, 150, 255, 0.35);
  flex-shrink: 0;
}

.duel-opponent__info {
  flex: 1;
}

.duel-opponent__name {
  font-weight: 800;
  font-size: 14px;
  color: var(--ink);
}

.duel-opponent__hp {
  font-size: 13px;
  opacity: 0.9;
  color: var(--ink);
}

/* ===== Арена ===== */
.duel-arena {
  display: grid;
  grid-template-columns: 64px 1fr 64px;
  align-items: center;
  gap: 8px;
  margin: 6px 0;
}

.duel-slots {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.slot {
  width: 56px;
  height: 72px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(0, 0, 0, 0.45);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.slot:hover {
  border-color: rgba(255, 255, 255, 0.25);
  background: rgba(0, 0, 0, 0.55);
}

.slot.lock {
  background: radial-gradient(circle at center, rgba(255, 255, 255, 0.12), rgba(0, 0, 0, 0.6));
}

/* Центр */
.duel-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

.duel-silhouette {
  width: 160px;
  height: 220px;
  background:
    radial-gradient(circle at center, rgba(100, 180, 255, 0.25), transparent 60%),
    rgba(0, 0, 0, 0.55);
  border-radius: 10px;
  box-shadow: 0 20px 40px var(--shadow);
}

/* ===== Кнопки ===== */
.duel-actions {
  display: flex;
  gap: 10px;
}

.btn-attack,
.btn-search {
  flex: 1;
  padding: 12px 0;
  border-radius: 10px;
  font-weight: 800;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 14px;
  letter-spacing: 0.5px;
  font-family: "Epoch YP", serif;
}

.btn-attack {
  background: linear-gradient(180deg, #3da83d, #1f5c1f);
  color: #eaffea;
  box-shadow: 0 4px 12px rgba(61, 168, 61, 0.3);
}

.btn-attack:hover {
  background: linear-gradient(180deg, #4db84d, #2a6c2a);
  box-shadow: 0 6px 16px rgba(61, 168, 61, 0.5);
}

.btn-attack:active {
  transform: translateY(1px);
}

.btn-attack:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.btn-search {
  background: linear-gradient(180deg, #cfd7df, #8f9aa3);
  color: #111;
  box-shadow: 0 4px 12px rgba(207, 215, 223, 0.3);
}

.btn-search:hover {
  background: linear-gradient(180deg, #dfe7ef, #9faab3);
  box-shadow: 0 6px 16px rgba(207, 215, 223, 0.5);
}

.btn-search:active {
  transform: translateY(1px);
}

/* ===== Інфо ===== */
.duel-info {
  text-align: center;
  font-size: 13px;
  opacity: 0.9;
  color: var(--ink);
  line-height: 1.6;
  font-family: "EB Garamond", serif;
}

.duel-info b {
  color: var(--heraldic-gold);
  font-weight: 600;
}

.duel-league-inline-icon{
  width: 22px;
  height: 22px;
  vertical-align: -5px;
  object-fit: contain;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.35));
}

.duel-info .muted {
  opacity: 0.6;
}

/* ===== League progress (duel) ===== */
.duel-league-progress{
  margin-top: 6px;
  padding: 6px 10px;
  border-radius: 10px;
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
}

.duel-league-progress__line{
  display: flex;
  justify-content: space-between;
  gap: 10px;
  font-size: 12px;
  opacity: 0.9;
}

.duel-league-progress__icon{
  width: 28px;
  height: 28px;
  object-fit: contain;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.35));
}

.duel-league-progress__bar{
  height: 8px;
  border-radius: 999px;
  margin-top: 6px;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.10);
  overflow: hidden;
  box-shadow: 0 8px 16px rgba(0,0,0,0.25);
}

.duel-league-progress__fill{
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--heraldic-gold), rgba(255,255,255,0.18));
  box-shadow: 0 0 14px rgba(184,148,70,0.35);
}

/* ===== Animations ===== */
@keyframes slideIn {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOut {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(-100%);
    opacity: 0;
  }
}

/* ===================== DUEL RESULT SCREEN ===================== */

.duel-result-screen{
  --result-accent: var(--heraldic-gold);
  --result-glow: rgba(184,148,70,0.35);
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.duel-result-screen.is-win{
  --result-accent: #3da83d;
  --result-glow: rgba(61,168,61,0.35);
}

.duel-result-screen.is-lose{
  --result-accent: var(--heraldic-red);
  --result-glow: rgba(139, 30, 30, 0.35);
}

.duel-result-screen.is-draw{
  --result-accent: var(--heraldic-blue);
  --result-glow: rgba(42, 79, 110, 0.35);
}

.duel-result-card--simple{
  padding: 18px 14px;
}

.duel-result-simple-sub{
  margin-top: 8px;
  opacity: 0.9;
  font-family: "EB Garamond", serif;
  font-size: 15px;
}

.duel-result-rewards--simple{
  margin-top: 10px;
  justify-content: center;
}

.duel-result-simple-lines{
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  opacity: 0.92;
}

.duel-result-simple-line{
  text-align: center;
  font-family: "EB Garamond", serif;
  font-size: 14px;
}

.duel-result-actions--simple{
  margin-top: 14px;
  justify-content: center;
}

.duel-result-league-icon{
  width: 18px;
  height: 18px;
  vertical-align: -3px;
  margin: 0 6px;
  object-fit: contain;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.35));
}

.duel-result-battle{
  padding: 14px 14px;
}

.duel-result-battle__title{
  margin-bottom: 8px;
}

.duel-result-battle__log{
  display: flex;
  flex-direction: column;
  gap: 8px;
  font-family: "EB Garamond", serif;
  font-size: 14px;
  line-height: 1.35;
}

.duel-result-battle__row{
  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(255,255,255,0.08);
}

.duel-result-battle__row--mini{
  padding: 10px 10px;
}

.duel-mini-meta{
  font-size: 12px;
  opacity: 0.75;
  margin-bottom: 6px;
}

.duel-mini-line{
  display: grid;
  grid-template-columns: 34px minmax(44px, auto) 26px minmax(44px, auto) 34px;
  align-items: center;
  justify-content: center;
  column-gap: 10px;
}

.duel-mini-card{
  width: 34px;
  height: 34px;
  border-radius: 8px;
  padding: 2px;
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
}

.duel-mini-card__art{
  width: 100%;
  height: 100%;
  border-radius: 6px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  border: 1px solid rgba(0,0,0,0.35);
}

.duel-mini-num{
  text-align: center;
  font-family: "EB Garamond", serif;
  font-weight: 700;
  letter-spacing: 0.2px;
  text-shadow: 0 4px 12px rgba(0,0,0,0.6);
  padding: 4px 8px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.18);
  min-width: 44px;
}

.duel-mini-num--p{
  color: #7dff7d;
}

.duel-mini-num--e{
  color: #ff8a8a;
}

.duel-mini-swords{
  width: 26px;
  height: 26px;
  object-fit: contain;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,0.55));
  opacity: 0.95;
}

.duel-result-battle__empty{
  opacity: 0.7;
}

.duel-result-crest{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  padding: 6px 8px 0;
}

.duel-result-crest::before,
.duel-result-crest::after{
  content: '';
  flex: 1;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--result-accent), transparent);
  opacity: 0.9;
}

.duel-result-crest__badge{
  width: 84px;
  height: 84px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.18), transparent 55%),
    linear-gradient(135deg, rgba(58,51,41,0.55), rgba(13,10,7,0.85));
  border: 2px solid rgba(255,255,255,0.12);
  box-shadow:
    0 22px 40px var(--shadow),
    0 0 0 6px rgba(0,0,0,0.25),
    0 0 28px var(--result-glow);
}

.duel-result-crest__badge::after{
  content:'';
  position:absolute;
  inset: 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.08);
}

.duel-result-crest__icon{
  width: 38px;
  height: 38px;
  filter: drop-shadow(0 10px 14px rgba(0,0,0,0.85));
  opacity: 0.95;
  position: relative;
  z-index: 1;
}

.duel-result-card{
  border-radius: var(--r);
  background:
    radial-gradient(circle at 50% 0%, var(--result-glow), transparent 62%),
    linear-gradient(145deg, rgba(13,10,7,0.75), rgba(58,51,41,0.58));
  border: 2px solid rgba(255,255,255,0.10);
  box-shadow:
    0 20px 45px var(--shadow),
    inset 0 1px 0 rgba(255,255,255,0.06);
  padding: 18px 16px 16px;
  position: relative;
  overflow: hidden;
}

.duel-result-card::before{
  content:'';
  position:absolute;
  inset: 0 0 auto 0;
  height: 4px;
  background: linear-gradient(90deg, transparent, var(--result-accent), transparent);
  opacity: 0.95;
}

.duel-result-title{
  text-align: center;
  font-size: 28px;
  font-weight: 800;
  letter-spacing: 1px;
  margin-top: 8px;
  color: var(--ink);
  text-shadow: 0 2px 12px rgba(0,0,0,0.85);
}

.duel-result-screen.is-win .duel-result-title{ color: #eaffea; }
.duel-result-screen.is-lose .duel-result-title{ color: #ffe7e7; }
.duel-result-screen.is-draw .duel-result-title{ color: #e7f1ff; }

.duel-result-subtitle{
  text-align: center;
  margin-top: 6px;
  opacity: 0.9;
  font-family: "EB Garamond", serif;
  font-size: 15px;
}

.duel-result-rewards{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 14px;
}

.duel-result-reward{
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
  font-family: "EB Garamond", serif;
}

.duel-result-reward img{
  width: 18px;
  height: 18px;
  display: block;
}

.duel-result-reward > span:not(.duel-result-reward__badge){
  min-width: 34px;
  text-align: right;
  font-weight: 700;
  color: var(--heraldic-gold);
}

.duel-result-reward__badge{
  min-width: 0;
  padding: 2px 8px;
  border-radius: 8px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12);
  font-size: 11px;
  letter-spacing: 0.8px;
  color: var(--ink);
}

.duel-result-reward--xp{
  border-color: rgba(135, 206, 235, 0.22);
  background: rgba(20, 40, 60, 0.22);
}

.duel-result-reward--xp > span:not(.duel-result-reward__badge){
  color: #87ceeb;
}

.duel-result-reward--trophy{
  border-color: rgba(255, 215, 0, 0.18);
  background: rgba(40, 30, 10, 0.22);
}

.duel-result-reward--trophy > span:not(.duel-result-reward__badge){
  min-width: 0;
  text-align: left;
  color: rgba(255, 240, 200, 0.95);
}

.duel-result-levelup{
  margin-top: 12px;
  padding: 10px 12px;
  border-radius: 10px;
  text-align: center;
  background:
    linear-gradient(135deg, rgba(0,0,0,0.35), rgba(0,0,0,0.15));
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
  font-family: "EB Garamond", serif;
  opacity: 0.95;
}

.duel-result-levelup b{
  color: var(--result-accent);
  font-weight: 800;
}

.duel-result-levelup__sep{
  opacity: 0.6;
  margin: 0 6px;
}

.duel-result-xpbar{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 10px;
  background: rgba(0, 0, 0, 0.28);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
}

.duel-result-xpbar__line{
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 12px;
  font-family: "EB Garamond", serif;
  font-size: 14px;
  opacity: 0.92;
}

.duel-result-xpbar__nums{
  opacity: 0.85;
  color: var(--ink);
}

.duel-result-xpbar__bar{
  height: 10px;
  border-radius: 999px;
  margin-top: 8px;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.10);
  overflow: hidden;
  box-shadow: 0 8px 16px rgba(0,0,0,0.35);
}

.duel-result-xpbar__fill{
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--result-accent), rgba(255,255,255,0.18));
  box-shadow: 0 0 18px var(--result-glow);
}

.duel-result-meta{
  margin-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  border-radius: 10px;
  background: rgba(0, 0, 0, 0.22);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
}

.duel-result-meta__row{
  display: flex;
  justify-content: space-between;
  gap: 12px;
  font-family: "EB Garamond", serif;
  font-size: 14px;
  opacity: 0.92;
  line-height: 1.4;
}

.duel-result-meta__row b{
  color: var(--heraldic-gold);
  font-weight: 600;
}

.duel-result-hp{
  text-align: center;
  margin-top: 12px;
  opacity: 0.85;
  font-family: "EB Garamond", serif;
  font-size: 14px;
}

.duel-result-actions{
  display: flex;
  gap: 10px;
  margin-top: 16px;
}

.duel-result-mini{
  padding: 14px 16px;
}

.duel-result-row{
  display: flex;
  justify-content: space-between;
  gap: 12px;
  font-family: "EB Garamond", serif;
  font-size: 14px;
  opacity: 0.92;
  line-height: 1.6;
}

.duel-result-row b{
  color: var(--heraldic-gold);
  font-weight: 600;
}

/* ===================== PROFILE SCREEN ===================== */

.profile-screen{
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.profile-block{
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
}

.profile-stats{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.profile-stat{
  padding: 10px 10px 12px;
  border-radius: 10px;
  background: rgba(0,0,0,0.28);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
  text-align: center;
}

.profile-stat__label{
  font-family: "EB Garamond", serif;
  font-size: 12px;
  opacity: 0.8;
}

.profile-stat__value{
  margin-top: 6px;
  font-size: 18px;
  font-weight: 800;
  color: var(--heraldic-gold);
  text-shadow: 0 8px 18px rgba(0,0,0,0.6);
}

.profile-xpbar{
  padding: 10px 12px;
  border-radius: 10px;
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
}

.profile-xpbar__line{
  display: flex;
  justify-content: space-between;
  gap: 12px;
  font-family: "EB Garamond", serif;
  font-size: 14px;
  opacity: 0.92;
}

.profile-xpbar__bar{
  height: 10px;
  border-radius: 999px;
  margin-top: 8px;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.10);
  overflow: hidden;
  box-shadow: 0 8px 16px rgba(0,0,0,0.35);
}

.profile-xpbar__fill{
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--heraldic-gold), rgba(255,255,255,0.18));
  box-shadow: 0 0 18px rgba(184,148,70,0.35);
}

.profile-league{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 10px;
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
}

.profile-league__left{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.profile-league__icon{
  width: 42px;
  height: 42px;
  flex-shrink: 0;
}

.profile-league__name{
  font-weight: 800;
  font-size: 15px;
  color: var(--ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-league__sub{
  font-family: "EB Garamond", serif;
  font-size: 13px;
  opacity: 0.85;
}

.profile-league__select{
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-family: "EB Garamond", serif;
  font-size: 13px;
  opacity: 0.95;
}

.profile-league__select select{
  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(0,0,0,0.35);
  color: var(--ink);
  border: 1px solid rgba(255,255,255,0.10);
  outline: none;
}

.profile-duel-gold{
  padding: 10px 12px;
  border-radius: 10px;
  background: rgba(0,0,0,0.20);
  border: 1px solid rgba(255,255,255,0.08);
  font-family: "EB Garamond", serif;
  font-size: 14px;
  opacity: 0.95;
}

.profile-duel-gold b{
  color: var(--heraldic-gold);
}

.profile-duel-gold__hint{
  margin-top: 6px;
  font-size: 12px;
  opacity: 0.7;
}

.profile-form{
  padding: 12px;
  border-radius: 10px;
  background: rgba(0,0,0,0.22);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
  display: flex;
  flex-direction: column;
  gap: 10px;
  font-family: "EB Garamond", serif;
}

.profile-form__row{
  display: grid;
  grid-template-columns: 1fr 140px;
  gap: 12px;
  align-items: center;
  font-size: 14px;
}

.profile-form__row--check{
  grid-template-columns: 1fr auto;
}

.profile-form input[type="number"],
.profile-form select{
  width: 100%;
  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(0,0,0,0.35);
  color: var(--ink);
  border: 1px solid rgba(255,255,255,0.10);
  outline: none;
}

.profile-form input[type="checkbox"]{
  width: 18px;
  height: 18px;
  accent-color: var(--heraldic-gold);
}

.profile-form__sep{
  height: 1px;
  background: rgba(255,255,255,0.08);
  margin: 4px 0;
}

.profile-medals{
  padding: 12px;
  border-radius: 10px;
  background: rgba(0,0,0,0.20);
  border: 1px solid rgba(255,255,255,0.08);
  font-family: "EB Garamond", serif;
}

.profile-medals__title{
  font-weight: 800;
  color: var(--heraldic-gold);
  margin-bottom: 6px;
}

.profile-medals__list{
  font-size: 13px;
  opacity: 0.9;
  line-height: 1.6;
}

/* ===================== TASKS SCREEN ===================== */

.tasks-screen {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* ===== Header with daily bonus ===== */
.tasks-header {
  background: linear-gradient(135deg, rgba(80, 70, 50, 0.6), rgba(60, 50, 30, 0.8));
  border: 2px solid var(--heraldic-red);
  border-radius: var(--r);
  padding: 16px;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.tasks-header::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(circle at 30% 50%, rgba(139, 30, 30, 0.1), transparent 50%);
  pointer-events: none;
}

.tasks-header__text {
  font-size: 13px;
  color: #f4e9d4;
  margin-bottom: 12px;
  font-weight: 600;
  position: relative;
  z-index: 1;
  letter-spacing: 0.5px;
}

.tasks-header__multiplier {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  position: relative;
  z-index: 1;
}

.tasks-header__mult {
  font-size: 24px;
  font-weight: 800;
  color: var(--heraldic-gold);
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
  min-width: 50px;
  text-align: center;
}

.tasks-header__mult--next {
  color: #90ff90;
}

.tasks-header__arrow {
  font-size: 20px;
  color: var(--heraldic-gold);
}

/* ===== Progress ===== */
.tasks-progress {
  background: rgba(13, 10, 7, 0.5);
  border: 1px solid rgba(180, 148, 70, 0.3);
  border-radius: var(--r-small);
  padding: 10px 12px;
  text-align: center;
  font-size: 13px;
  color: #d4c4a0;
  font-family: "EB Garamond", serif;
}

.tasks-progress__value {
  color: var(--heraldic-gold);
  font-weight: 700;
  margin-left: 4px;
}

/* ===== Tasks List ===== */
.tasks-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.tasks-act{
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.tasks-act__head{
  border-radius: 14px;
  border: 1px solid rgba(184,148,70,0.34);
  background:
    radial-gradient(120% 120% at 20% 0%, rgba(255,255,255,0.05), transparent 55%),
    linear-gradient(180deg, rgba(30,24,16,0.92), rgba(12,10,8,0.92));
  box-shadow:
    0 18px 34px rgba(0,0,0,0.65),
    inset 0 1px 0 rgba(255,255,255,0.06);
  padding: 14px;
}

.tasks-act__title{
  margin: 0;
  color: #f2d08a;
  font-size: 30px;
  line-height: 1.05;
  text-shadow: 0 2px 0 rgba(0,0,0,0.7);
}

.tasks-act__intro{
  margin: 8px 0 0;
  color: rgba(244,233,212,0.86);
  font-size: 14px;
  line-height: 1.35;
  font-weight: 600;
}

.tasks-act__boss{
  margin: 8px 0 0;
  color: rgba(244,233,212,0.96);
  font-size: 13px;
  font-weight: 800;
}

/* ===== Task Item ===== */
.task-item {
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.3), rgba(60, 80, 110, 0.5));
  border: 1px solid rgba(80, 150, 200, 0.3);
  border-radius: 10px;
  padding: 12px;
  position: relative;
  overflow: hidden;
}

.task-item::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(100, 180, 255, 0.05), transparent);
  pointer-events: none;
}

.task-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
  position: relative;
  z-index: 1;
}

.task-title {
  font-size: 13px;
  font-weight: 600;
  color: #c8dfe8;
  margin: 0;
  flex: 1;
}

.task-mult {
  font-size: 14px;
  font-weight: 800;
  color: var(--heraldic-gold);
  min-width: 28px;
  text-align: center;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6);
}

.task-progress {
  font-size: 12px;
  color: #a8bfd0;
  margin-bottom: 8px;
  position: relative;
  z-index: 1;
  font-family: "EB Garamond", serif;
}

.task-progress b {
  color: var(--heraldic-gold);
  font-weight: 700;
}

.task-reward-inline {
  display: inline;
  font-size: 12px;
  color: #a8bfd0;
  position: relative;
  z-index: 1;
  margin-left: 12px;
}

.task-reward-inline .task-reward__icon {
  font-size: 14px;
  margin-left: 4px;
}

.task-reward-inline .task-reward__value {
  color: var(--heraldic-gold);
  font-weight: 700;
  margin-left: 2px;
}

.task-reward {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: #a8bfd0;
  margin-bottom: 10px;
  position: relative;
  z-index: 1;
}

.task-reward__icon {
  font-size: 14px;
}

.task-reward__value {
  color: var(--heraldic-gold);
  font-weight: 700;
}

/* ===== Task Gifts ===== */
.task-gifts {
  background: rgba(0, 0, 0, 0.3);
  border-left: 3px solid var(--heraldic-gold);
  border-radius: 4px;
  padding: 8px 10px;
  margin-bottom: 10px;
  position: relative;
  z-index: 1;
  font-size: 11px;
}

.task-gifts__title {
  color: #f4e9d4;
  font-weight: 600;
  margin-bottom: 4px;
  font-size: 12px;
}

.task-gifts__item {
  color: #c8dfe8;
  margin-bottom: 2px;
  line-height: 1.4;
}

.task-gifts__item:last-child {
  margin-bottom: 0;
}

/* Donate Task Item */
.task-item--donate {
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.9), rgba(20, 40, 60, 0.95));
  border: 2px solid var(--heraldic-gold);
}

.donate-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.donate-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--heraldic-gold);
  flex-shrink: 0;
}

.donate-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.donate-text {
  flex: 1;
}

.donate-text p {
  margin: 0;
  color: var(--ink);
  font-size: 14px;
  line-height: 1.4;
}

.donate-text p:first-child {
  font-weight: 600;
  color: var(--heraldic-gold);
}

.donate-price {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: rgba(0,0,0,0.3);
  border-radius: 8px;
  margin-bottom: 12px;
  font-size: 16px;
  font-weight: 700;
  color: #4ade80;
}

.donate-price .icon--gold {
  width: 20px;
  height: 20px;
}

.donate-buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.donate-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px 16px;
  border-radius: 8px;
  font-weight: 700;
  font-size: 14px;
  text-decoration: none;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: all 0.2s ease;
  cursor: pointer;
}

.donate-btn span {
  position: relative;
  z-index: 2;
}

.donate-btn--paypal {
  background: linear-gradient(180deg, #0070ba, #003087);
  color: #fff;
}

.donate-btn--paypal:hover {
  background: linear-gradient(180deg, #1a8ad4, #0055a5);
  box-shadow: 0 4px 12px rgba(0, 112, 186, 0.4);
}

.donate-btn--privat {
  background: linear-gradient(180deg, #4caf50, #2e7d32);
  color: #fff;
}

.donate-btn--privat:hover {
  background: linear-gradient(180deg, #66bb6a, #388e3c);
  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
}

.donate-btn--mono {
  background: linear-gradient(180deg, #1a1a1a, #000);
  color: #fff;
}

.donate-btn--mono:hover {
  background: linear-gradient(180deg, #333, #111);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.task-btn {
  appearance: none;
  width: 100%;
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: linear-gradient(180deg, #3da83d, #1f5c1f);
  color: #000;
  font-weight: 800;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: "Epoch YP", serif;
  position: relative;
  z-index: 1;
  letter-spacing: 1px;
  text-transform: uppercase;
  overflow: hidden;
  text-shadow: 0 1px 0 rgba(255,255,255,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
}

.task-btn::before {
  content: attr(data-text);
  position: relative;
  z-index: 3;
}

/* Текстура пергаменту для задань */
.task-btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: none;
  border-radius: 8px;
  pointer-events: none;
  opacity: 0;
  filter: none;
  z-index: 1;
}

.task-btn span {
  position: relative;
  z-index: 3;
}

.task-btn:hover {
  background: linear-gradient(180deg, #4db84d, #2a6c2a);
  box-shadow: 0 4px 12px rgba(61, 168, 61, 0.4);
}

.task-btn:active {
  transform: translateY(1px);
}

/* ===== Tasks polish (contrast + hierarchy + button states) ===== */
:root{
  --q-bg1: rgba(18, 40, 58, 0.88);
  --q-bg2: rgba(10, 26, 40, 0.88);
  --q-stroke: rgba(184,148,70,0.22);
  --q-stroke2: rgba(255,255,255,0.06);
  --q-title: #e8d08a;
  --q-muted: rgba(244,233,212,0.72);
}

.task-item{
  border-radius: 14px;
  border: 1px solid var(--q-stroke);
  background:
    radial-gradient(120% 120% at 20% 0%, rgba(255,255,255,0.06), transparent 55%),
    linear-gradient(180deg, var(--q-bg1), var(--q-bg2));
  box-shadow:
    0 18px 34px rgba(0,0,0,0.65),
    inset 0 1px 0 var(--q-stroke2);
  padding: 14px 14px 12px;
}

.task-item::before{
  content:"";
  position:absolute;
  left:0;
  right:0;
  top:0;
  height:2px;
  background: linear-gradient(90deg, transparent, rgba(184,148,70,0.55), transparent);
}

.task-title{
  color: var(--q-title);
  font-weight: 900;
  letter-spacing: 0.2px;
  text-shadow: 0 2px 0 rgba(0,0,0,0.6);
  font-size: 18px;
  line-height: 1.15;
}

.task-progress{
  margin-top: 6px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  color: var(--q-muted);
  font-weight: 700;
  font-size: 14px;
}

.task-progress b{
  font-variant-numeric: tabular-nums;
  color: rgba(255,255,255,0.92);
  font-weight: 900;
  text-shadow: 0 1px 0 rgba(0,0,0,0.7);
}

.task-reward-inline{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  margin-left: 0;
  border-radius: 999px;
  background: rgba(0,0,0,0.28);
  border: 1px solid rgba(255,255,255,0.06);
  color: rgba(244,233,212,0.92);
  font-weight: 800;
  font-size: 13px;
}

.task-rewards-wrap{
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.task-bar{
  margin-top: 10px;
  height: 8px;
  border-radius: 999px;
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.06);
  overflow: hidden;
}

.task-bar > i{
  display: block;
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(184,148,70,0.9), rgba(255,220,140,0.95));
  box-shadow: 0 0 14px rgba(184,148,70,0.25);
}

.task-actions{
  margin-top: 12px;
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

.task-btn{
  height: 44px;
  width: 100%;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  font-family: "EB Garamond", serif;
  font-weight: 900;
  letter-spacing: 0.2px;
  box-shadow: 0 12px 22px rgba(0,0,0,0.55);
  text-transform: uppercase;
  text-shadow: none;
  position: relative;
  overflow: hidden;
  background-color: rgba(24,56,84,0.92);
}

.task-btn::before{
  content: none;
}

.task-btn::after{
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse at 30% 15%, rgba(255,255,255,0.16), transparent 55%),
    repeating-linear-gradient(0deg, rgba(255,255,255,0.02) 0 1px, rgba(0,0,0,0.02) 1px 2px);
  opacity: 0.55;
  pointer-events: none;
}

.task-btn--go{
  color: #241206;
  border-color: rgba(196,155,76,0.72);
  background:
    linear-gradient(180deg, rgba(255,232,184,0.22) 0%, rgba(140,96,40,0.22) 100%),
    var(--btn-tex-gold) center / cover no-repeat;
  background-blend-mode: soft-light, normal;
  box-shadow:
    inset 0 1px 0 rgba(255,245,220,0.58),
    inset 0 -2px 6px rgba(70,35,8,0.32),
    0 10px 20px rgba(0,0,0,0.42);
  filter: none;
  opacity: 1;
}

.task-btn--go::after{
  background:
    radial-gradient(ellipse at 28% 16%, rgba(255,255,255,0.22), transparent 52%),
    repeating-radial-gradient(circle at 25% 30%, rgba(95,58,22,0.05) 0 2px, transparent 2px 8px),
    repeating-linear-gradient(0deg, rgba(255,255,255,0.02) 0 1px, rgba(0,0,0,0.02) 1px 2px);
  opacity: 0.42;
}

.task-btn--go span{
  color: #2a1407;
  text-shadow:
    0 1px 0 rgba(255,245,220,0.5),
    0 0 1px rgba(30,15,6,0.45);
}

.task-btn--claim{
  color: rgba(230,242,248,0.96);
  border-color: rgba(124,162,186,0.42);
  background:
    linear-gradient(180deg, rgba(156,255,198,0.14) 0%, rgba(8,36,28,0.20) 100%),
    var(--btn-tex-green) center / cover no-repeat;
  background-blend-mode: soft-light, normal;
  display: none;
}

.task-btn--claim::after{
  background:
    radial-gradient(ellipse at 34% 14%, rgba(255,255,255,0.15), transparent 56%),
    repeating-linear-gradient(90deg, rgba(255,255,255,0.02) 0 1px, rgba(0,0,0,0.025) 1px 3px);
  opacity: 0.34;
}

.task-item.is-complete .task-btn--go{
  display: none;
}

.task-item.is-complete .task-btn--claim{
  display: flex;
}

.task-btn[disabled],
.task-btn.is-disabled{
  cursor: not-allowed;
  filter: grayscale(0.35) saturate(0.6);
  opacity: 0.55;
  box-shadow: 0 8px 16px rgba(0,0,0,0.35);
}

.task-btn--claim[disabled],
.task-btn--claim.is-disabled{
  background:
    linear-gradient(180deg, rgba(208,216,224,0.08) 0%, rgba(28,34,40,0.22) 100%),
    var(--btn-tex-grey) center / cover no-repeat;
  background-blend-mode: soft-light, normal;
  border-color: rgba(196,202,210,0.18);
  color: rgba(225,230,236,0.66);
}

.task-btn[hidden]{
  display: none !important;
}

@media (hover:hover){
  .task-item:hover{
    border-color: rgba(184,148,70,0.32);
  }
  .task-btn--go:hover{
    filter: brightness(1.06);
    box-shadow:
      inset 0 1px 0 rgba(255,250,230,0.65),
      inset 0 -2px 6px rgba(70,35,8,0.3),
      0 12px 24px rgba(0,0,0,0.52);
  }
  .task-btn--claim:hover{
    filter: brightness(1.06);
  }
}
/* ============================================================
   CAMPAIGN SCREEN
   ============================================================ */

.campaign-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.campaign-progress-bar {
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(42, 79, 110, 0.8), rgba(58, 92, 58, 0.8));
  border-bottom: 2px solid var(--heraldic-gold);
  color: var(--heraldic-gold);
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  text-align: center;
  display: flex;
  justify-content: center;
  gap: 8px;
}

.campaign-progress-value {
  font-weight: 700;
  color: #fff;
}

.campaign-description {
  padding: 16px;
  background: rgba(0, 0, 0, 0.3);
  color: #ccc;
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  line-height: 1.5;
  text-align: center;
  border-bottom: 1px solid rgba(184, 148, 70, 0.2);
}

.campaign-challenges {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  overflow-y: auto;
}

/* Featured challenge (first one) - parchment style */
.campaign-challenge--featured {
  background: linear-gradient(135deg, #f5e6d3, #e8d7c3);
  border: 2px solid var(--heraldic-gold);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.campaign-challenge--featured .campaign-challenge__title {
  color: #3a2f1f;
}

.campaign-challenge--featured .campaign-challenge__progress {
  color: #5a4f3f;
}

.campaign-challenge--featured .campaign-btn--primary {
  background: transparent;
  color: #1a1a1a;
  border: 1px solid #8b7355;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.campaign-challenge--featured .campaign-btn--primary::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  border-radius: 6px;
  z-index: -1;
}

.campaign-challenge--featured .campaign-btn--primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
}

/* Regular challenges - dark blue style */
.campaign-challenge {
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.7), rgba(30, 60, 90, 0.7));
  border: 1px solid rgba(184, 148, 70, 0.3);
  border-radius: 8px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Boss card */
.campaign-challenge--boss {
  background: linear-gradient(135deg, rgba(139, 30, 30, 0.65), rgba(45, 10, 10, 0.85));
  border-color: rgba(255, 100, 100, 0.35);
}

.campaign-challenge__content--boss {
  justify-content: space-between;
}

.campaign-challenge__reward.is-boss {
  background: rgba(0, 0, 0, 0.35);
  color: rgba(255, 235, 235, 0.95);
  border: 1px solid rgba(255, 140, 140, 0.15);
}

.campaign-challenge__header {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.campaign-challenge__title {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 600;
  color: #d4af37;
  margin: 0;
  line-height: 1.3;
}

.campaign-challenge__content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
}

.campaign-challenge__progress {
  color: #a8a8a8;
  font-family: 'EB Garamond', serif;
}

.campaign-challenge__progress b {
  color: #ffffff;
  font-weight: 700;
}

.campaign-challenge__rewards {
  display: flex;
  gap: 8px;
  align-items: center;
}

.campaign-challenge__reward {
  display: flex;
  align-items: center;
  gap: 3px;
  background: rgba(0, 0, 0, 0.3);
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
  font-size: 11px;
}

.campaign-reward-icon {
  font-size: 12px;
}

.campaign-reward-value {
  color: #ffd700;
}

/* Campaign Buttons */
.campaign-btn {
  width: 100%;
  padding: 10px 16px;
  border: 1px solid rgba(184, 148, 70, 0.4);
  border-radius: 6px;
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
}

.campaign-btn--secondary {
  background: transparent;
  color: #1a1a1a;
  border: 1px solid #8b7355;
}

.campaign-btn--secondary::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  border-radius: 6px;
  z-index: -1;
}

.campaign-btn--secondary:not(:disabled):hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
}

.campaign-btn--secondary:not(:disabled):active {
  transform: translateY(1px);
}

.campaign-btn--primary {
  background: transparent;
  color: #1a1a1a;
  border: 1px solid rgba(184, 148, 70, 0.55);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.campaign-btn--primary::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-green);
  background-size: cover;
  background-position: center;
  border-radius: 6px;
  z-index: -1;
}

.campaign-btn--primary:not(:disabled):hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(74, 138, 90, 0.35);
}

.campaign-btn--primary:not(:disabled):active {
  transform: translateY(1px);
}

.campaign-btn:disabled {
  cursor: not-allowed;
  opacity: 0.55;
  transform: none !important;
  box-shadow: none !important;
  filter: grayscale(0.35) saturate(0.8);
}

.campaign-btn:disabled::before {
  opacity: 0.75;
  filter: grayscale(1) brightness(0.9);
}

.campaign-challenge--featured .campaign-btn--primary:active {
  transform: translateY(1px);
}

/* ===== Campaign Acts (dynamic) ===== */
.campaign-act{
  margin-top: 12px;
}
.campaign-act__head{
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.28);
  padding: 12px 12px 10px;
  box-shadow: 0 12px 24px rgba(0,0,0,0.35);
}
.campaign-act__head.is-active{
  border-color: rgba(255,200,50,0.25);
  background: linear-gradient(180deg, rgba(255,200,50,0.10), rgba(0,0,0,0.25));
}
.campaign-act__head.is-done{
  opacity: 0.85;
}
.campaign-act__title{
  font-weight: 900;
  color: rgba(244,233,212,0.95);
}
.campaign-act__intro{
  margin-top: 6px;
  font-size: 13px;
  opacity: 0.88;
  line-height: 1.25;
}
.campaign-act__boss{
  margin-top: 8px;
  font-size: 12px;
  opacity: 0.80;
}
.campaign-act__quests{
  display: grid;
  gap: 12px;
  margin-top: 10px;
}
.campaign-challenge__actions{
  display:flex;
  gap: 10px;
  margin-top: 10px;
}
.campaign-challenge__actions .campaign-btn{
  width: auto;
  flex: 1;
}
.campaign-progress-mini{
  height: 8px;
  border-radius: 999px;
  margin-top: 10px;
  background: rgba(255,255,255,0.08);
  overflow:hidden;
}
.campaign-progress-mini__fill{
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, rgba(110,180,255,0.65), rgba(255,200,80,0.35));
}

/* ============================================================
   ARENA SCREEN
   ============================================================ */

.arena-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.arena-header {
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(139, 30, 30, 0.7), rgba(42, 79, 110, 0.7));
  border-bottom: 2px solid var(--heraldic-gold);
  border-top: 1px solid rgba(184, 148, 70, 0.3);
}

.arena-title {
  font-family: 'EB Garamond', serif;
  font-size: 24px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin: 0;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.arena-info-block {
  padding: 16px;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.5), rgba(30, 60, 90, 0.5));
  border-bottom: 1px solid rgba(184, 148, 70, 0.2);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.arena-description {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: #ccc;
  line-height: 1.5;
  text-align: center;
}

.arena-description p {
  margin: 0;
}

.arena-requirement {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid var(--heraldic-gold);
  border-radius: 8px;
  margin: 8px 0;
}

.arena-requirement-icon {
  width: 32px;
  height: 32px;
  background-image: url('../icons/leagues/league-purple-3.svg');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.arena-requirement-value {
  font-family: 'EB Garamond', serif;
  font-size: 18px;
  font-weight: 700;
  color: var(--heraldic-gold);
}

.arena-note {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  color: #a8a8a8;
  text-align: center;
  font-style: italic;
  line-height: 1.4;
}

.arena-rules-link {
  display: block;
  text-align: center;
  padding: 8px;
  color: #5a9eff;
  text-decoration: none;
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  border-top: 1px solid rgba(90, 158, 255, 0.3);
  border-bottom: 1px solid rgba(90, 158, 255, 0.3);
  transition: color 0.2s ease;
}

.arena-rules-link:hover {
  color: #7aafff;
}

/* Tournament styles */
.tournament-trophies {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 8px;
  padding: 20px 16px;
}

.tournament-trophy {
  width: 64px;
  height: 64px;
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5));
}

.tournament-trophy--gold {
  width: 80px;
  height: 80px;
  filter: drop-shadow(0 0 12px rgba(255,200,60,0.6)) drop-shadow(0 4px 8px rgba(0,0,0,0.5));
}

.tournament-trophy--silver {
  filter: hue-rotate(180deg) saturate(0.3) brightness(1.2) drop-shadow(0 4px 8px rgba(0,0,0,0.5));
}

.tournament-trophy--bronze {
  filter: hue-rotate(30deg) saturate(0.6) brightness(0.9) drop-shadow(0 4px 8px rgba(0,0,0,0.5));
}

.tournament-access {
  text-align: center;
}

.tournament-access-text {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  color: var(--ink);
  margin-bottom: 8px;
}

.tournament-league-req {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  margin-bottom: 12px;
}

.tournament-league-icon {
  width: 24px;
  height: 24px;
  background-image: url('../icons/leagues/league-purple-3.svg');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.tournament-league-text {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 600;
  color: #cc4cff;
}

.tournament-locked-text {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: #a8a8a8;
  margin-bottom: 16px;
}

/* Tournament rules styles */
.arena-rules-paragraph {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: var(--ink);
  line-height: 1.5;
  margin-bottom: 10px;
}

.arena-rules-note {
  font-style: italic;
  color: #a8a8a8;
  font-size: 13px;
}

.tournament-prizes-row {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 12px;
  margin: 16px 0;
}

.tournament-medal {
  width: 24px;
  height: 24px;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}

.tournament-medal--participant {
  filter: hue-rotate(-30deg) saturate(0.5) brightness(0.7) drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}

.tournament-medal--silver {
  filter: saturate(0.2) brightness(1.3) drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}

.tournament-medal--gold {
  filter: drop-shadow(0 0 3px rgba(255,200,60,0.4)) drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}

.tournament-medal--bronze {
  filter: hue-rotate(-15deg) saturate(0.7) brightness(0.85) drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}

.tournament-trophy {
  width: 28px;
  height: 28px;
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.5));
}

.tournament-trophy--gold {
  width: 32px;
  height: 32px;
  filter: drop-shadow(0 0 4px rgba(255,200,60,0.5)) drop-shadow(0 2px 3px rgba(0,0,0,0.5));
}

.tournament-trophy--silver {
  filter: saturate(0.2) brightness(1.3) drop-shadow(0 2px 3px rgba(0,0,0,0.5));
}

.tournament-trophy--bronze {
  filter: hue-rotate(-15deg) saturate(0.7) brightness(0.85) drop-shadow(0 2px 3px rgba(0,0,0,0.5));
}

.tournament-trophy--dark {
  filter: saturate(0.3) brightness(0.6) drop-shadow(0 3px 6px rgba(0,0,0,0.5));
}

.arena-menu {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px;
}

.arena-menu-item {
  box-sizing: border-box;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  position: relative;
  overflow: hidden;

  min-height: 60px;
  padding: 0 18px;

  color: #3d2f1f;
  text-shadow: 0 1px 0 rgba(255,255,255,0.3);
  font-family: "EB Garamond", serif;
  font-weight: 700;
  border-radius: 12px;
  border: none;
  background: linear-gradient(135deg, rgba(90,140,60,0.6), rgba(60,100,40,0.7));
  box-shadow: 0 10px 20px rgba(0,0,0,0.55);
  gap: 12px;
  cursor: pointer;
  transition: transform 0.1s ease;
}

/* Текстура пергаменту для пунктів арени */
.arena-menu-item::before{
  content: "";
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: 12px;
  pointer-events: none;
  opacity: 0.9;
}

.arena-menu-item:last-child {
  border-bottom: none;
}

.arena-menu-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.6);
}

.arena-menu-item:active {
  transform: translateY(1px);
}

.arena-menu-icon {
  font-size: 20px;
  min-width: 28px;
  position: relative;
  z-index: 1;
}

.arena-menu-text {
  color: #3d2f1f;
  font-size: 15px;
  font-weight: 700;
  letter-spacing: 0.3px;
  position: relative;
  z-index: 1;
}

.arena-menu-item:hover .arena-menu-text {
  color: #2a1f10;
}
/* ============================================================
   ARENA RULES SCREEN
   ============================================================ */

.arena-rules-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.arena-rules-header {
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(139, 30, 30, 0.7), rgba(42, 79, 110, 0.7));
  border-bottom: 2px solid var(--heraldic-gold);
  border-top: 1px solid rgba(184, 148, 70, 0.3);
}

.arena-rules-title {
  font-family: 'EB Garamond', serif;
  font-size: 24px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin: 0;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.arena-rules-intro {
  padding: 14px 16px;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.4), rgba(30, 60, 90, 0.4));
  border-bottom: 1px solid rgba(184, 148, 70, 0.2);
}

.arena-rules-intro p {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: #d4af37;
  margin: 0;
  line-height: 1.5;
  text-align: center;
}

.arena-rules-content {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.arena-rules-subtitle {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin: 0 0 12px 0;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.arena-rules-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.arena-rules-item {
  display: flex;
  gap: 8px;
  padding: 10px;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.5), rgba(30, 60, 90, 0.5));
  border-left: 3px solid var(--heraldic-gold);
  border-radius: 4px;
  transition: all 0.2s ease;
}

.arena-rules-item:hover {
  background: linear-gradient(135deg, rgba(52, 99, 130, 0.6), rgba(40, 70, 100, 0.6));
  box-shadow: 0 2px 8px rgba(184, 148, 70, 0.15);
}

.arena-rules-bullet {
  color: var(--heraldic-gold);
  font-weight: 700;
  font-size: 14px;
  min-width: 16px;
  flex-shrink: 0;
  padding-top: 1px;
}

.arena-rules-text {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  color: #ccc;
  line-height: 1.5;
  flex: 1;
}

/* ============================================================
   COLLECTIONS SCREEN
   ============================================================ */

.collections-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.collections-header {
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(139, 30, 30, 0.7), rgba(42, 79, 110, 0.7));
  border-bottom: 2px solid var(--heraldic-gold);
  border-top: 1px solid rgba(184, 148, 70, 0.3);
}

.collections-title {
  font-family: 'EB Garamond', serif;
  font-size: 24px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin: 0;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.collections-intro {
  padding: 14px 16px;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.4), rgba(30, 60, 90, 0.4));
  border-bottom: 1px solid rgba(184, 148, 70, 0.2);
}

.collections-intro p {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: #d4af37;
  margin: 0;
  line-height: 1.5;
  text-align: center;
}

.collections-grid {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  padding: 12px;
  overflow-y: auto;
  align-content: start;
}

.collection-card {
  display: flex;
  flex-direction: column;
  gap: 6px;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.6), rgba(30, 60, 90, 0.6));
  border: 1px solid rgba(184, 148, 70, 0.3);
  border-radius: 6px;
  padding: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-decoration: none;
}

.collection-card:hover {
  background: linear-gradient(135deg, rgba(52, 99, 130, 0.8), rgba(40, 70, 100, 0.8));
  border-color: rgba(184, 148, 70, 0.6);
  box-shadow: 0 2px 8px rgba(184, 148, 70, 0.2);
  transform: translateY(-2px);
}

.collection-card__image {
  width: 100%;
  aspect-ratio: 1;
  background: linear-gradient(135deg, #1a3a5a, #0a1a3a);
  border: 1px solid rgba(184, 148, 70, 0.2);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  font-size: 24px;
}

.collection-card__title {
  font-family: 'EB Garamond', serif;
  font-size: 11px;
  font-weight: 600;
  color: #d4af37;
  margin: 0;
  text-align: center;
  line-height: 1.2;
  min-height: 20px;
}

.collection-card__progress {
  display: flex;
  justify-content: center;
}

.collection-card__count {
  font-family: 'EB Garamond', serif;
  font-size: 10px;
  color: #a8a8a8;
  font-weight: 600;
}

/* ============================================================
   COLLECTION OPEN SCREEN
   ============================================================ */

.collection-open-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: linear-gradient(180deg, #0a1520 0%, #0d1f2d 50%, #0a1520 100%);
}

.collection-open-header {
  padding: 14px 16px 8px;
  background: linear-gradient(90deg, rgba(42, 79, 110, 0.6), rgba(30, 60, 90, 0.8), rgba(42, 79, 110, 0.6));
  border-bottom: 2px solid var(--heraldic-gold);
}

.collection-open-title {
  font-family: 'EB Garamond', serif;
  font-size: 22px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin: 0;
  text-align: center;
  text-transform: none;
  letter-spacing: 0.5px;
}

.collection-open-decor {
  display: flex;
  justify-content: center;
  gap: 100px;
  padding: 6px 0;
  background: linear-gradient(90deg, transparent, rgba(42, 79, 110, 0.3), transparent);
}

.collection-open-decor__item {
  font-size: 20px;
  color: var(--heraldic-gold);
  opacity: 0.7;
  transform: scaleX(-1);
}

.collection-open-decor__item:last-child {
  transform: scaleX(1);
}

.collection-open-art {
  display: flex;
  justify-content: center;
  padding: 10px 0;
}

.collection-open-art__frame {
  width: 100px;
  height: 100px;
  border: 2px solid var(--heraldic-gold);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(184, 148, 70, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.5);
  background: linear-gradient(135deg, #1a3a5a, #0a1a3a);
}

.collection-open-art__frame img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.collection-open-bonus {
  text-align: center;
  padding: 12px 16px;
  background: linear-gradient(90deg, transparent, rgba(42, 79, 110, 0.4), transparent);
}

.collection-open-bonus__title {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: #a0a0a0;
  margin: 0 0 6px;
}

.collection-open-bonus__desc {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: #fff;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.collection-open-bonus__icon {
  color: var(--heraldic-gold);
}

.collection-open-bonus__elem {
  font-size: 16px;
}

.collection-open-progress {
  text-align: center;
  padding: 10px 16px;
}

.collection-open-progress__text {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: #888;
}

.collection-open-progress__text b {
  color: var(--heraldic-gold);
}

.collection-open-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  padding: 12px 20px;
  max-width: 100%;
  margin: 0 auto;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(60, 60, 60, 0.5);
  border-radius: 8px;
  margin-left: 16px;
  margin-right: 16px;
}

.collection-open-card {
  aspect-ratio: 1;
  border: 2px solid rgba(100, 100, 100, 0.5);
  border-radius: 4px;
  overflow: hidden;
  position: relative;
  cursor: pointer;
  transition: all 0.2s ease;
  background: linear-gradient(135deg, #1a3a5a, #0a1a3a);
}

.collection-open-card:hover {
  border-color: var(--heraldic-gold);
  transform: scale(1.03);
  box-shadow: 0 4px 16px rgba(184, 148, 70, 0.3);
  z-index: 2;
}

.collection-open-card.is-found {
  border-color: rgba(184, 148, 70, 0.6);
}

.collection-open-card.is-locked {
  border-color: rgba(60, 60, 60, 0.6);
}

.collection-open-card.is-locked::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
}

.collection-open-card__art {
  width: 100%;
  height: 100%;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #1a2a3a;
  display: block;
}

.collection-open-source {
  text-align: center;
  padding: 16px;
  margin-top: auto;
}

.collection-open-source p {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  color: #777;
  margin: 0 0 6px;
}

.collection-open-source__link {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: #5ba3e0;
  text-decoration: underline;
  transition: color 0.2s;
}

.collection-open-source__link:hover {
  color: #8bc4f0;
}

.collection-open-nav {
  display: flex;
  justify-content: center;
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(42, 79, 110, 0.5), rgba(30, 60, 90, 0.7), rgba(42, 79, 110, 0.5));
  border-top: 1px solid rgba(184, 148, 70, 0.3);
  border-bottom: 1px solid rgba(184, 148, 70, 0.3);
}

.collection-open-nav__btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 24px;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.8), rgba(30, 60, 90, 0.9));
  border: 2px solid var(--heraldic-gold);
  border-radius: 6px;
  text-decoration: none;
  transition: all 0.2s;
}

.collection-open-nav__btn:hover {
  background: linear-gradient(135deg, rgba(52, 99, 130, 0.9), rgba(40, 70, 100, 1));
  box-shadow: 0 4px 12px rgba(184, 148, 70, 0.3);
}

.collection-open-nav__icon {
  font-size: 20px;
}

.collection-open-nav__text {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 600;
  color: var(--heraldic-gold);
}

/* ============================================================
   EQUIPMENT SCREEN
   ============================================================ */

.equipment-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: linear-gradient(180deg, #0a1520 0%, #0d1f2d 50%, #0a1520 100%);
}

.equipment-header {
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(42, 79, 110, 0.6), rgba(58, 92, 58, 0.7), rgba(42, 79, 110, 0.6));
  border-bottom: 2px solid var(--heraldic-gold);
}

.equipment-header__title {
  font-family: 'EB Garamond', serif;
  font-size: 20px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin: 0;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.equipment-character {
  position: relative;
  padding: 16px;
  min-height: 220px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  background: 
    radial-gradient(ellipse at center, rgba(100, 80, 200, 0.15) 0%, transparent 60%),
    linear-gradient(180deg, rgba(20, 30, 50, 0.8), rgba(10, 20, 40, 0.9));
}

.equipment-slots {
  display: flex;
  gap: 12px;
  z-index: 2;
}

.equipment-slots--top {
  margin-bottom: -10px;
}

.equipment-slots--bottom {
  margin-top: -10px;
}

.equipment-middle {
  display: flex;
  align-items: center;
  gap: 0;
  width: 100%;
  justify-content: center;
}

.equipment-slots--left,
.equipment-slots--right {
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 2;
}

.equipment-avatar {
  width: 140px;
  height: 180px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  background: 
    radial-gradient(ellipse at 50% 30%, rgba(140, 80, 255, 0.3) 0%, transparent 50%),
    radial-gradient(ellipse at 30% 60%, rgba(80, 60, 200, 0.25) 0%, transparent 40%),
    radial-gradient(ellipse at 70% 70%, rgba(100, 80, 220, 0.2) 0%, transparent 35%);
  border-radius: 8px;
}

.equipment-avatar::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    linear-gradient(135deg, transparent 40%, rgba(180, 130, 255, 0.15) 50%, transparent 60%),
    linear-gradient(225deg, transparent 40%, rgba(100, 150, 255, 0.1) 50%, transparent 60%);
  animation: equipment-glow 3s ease-in-out infinite alternate;
  border-radius: 8px;
}

@keyframes equipment-glow {
  0% { opacity: 0.5; }
  100% { opacity: 1; }
}

.equipment-avatar__silhouette {
  width: 100%;
  height: 100%;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 140"><path fill="%23000" opacity="0.8" d="M50 10c-8 0-15 12-15 25 0 8 3 15 8 20l-3 5-25 15c-5 3-8 10-8 18v35c0 5 3 8 8 8h70c5 0 8-3 8-8v-35c0-8-3-15-8-18l-25-15-3-5c5-5 8-12 8-20 0-13-7-25-15-25z"/></svg>') center/contain no-repeat;
  filter: drop-shadow(0 0 30px rgba(100, 80, 200, 0.4));
}

.equipment-slot {
  width: 52px;
  height: 52px;
  border: 2px solid rgba(150, 150, 150, 0.5);
  border-radius: 6px;
  background: rgba(20, 30, 50, 0.7);
  cursor: pointer;
  transition: all 0.2s ease;
}

.equipment-slot:hover {
  border-color: var(--heraldic-gold);
  box-shadow: 0 0 12px rgba(184, 148, 70, 0.4);
}

.equipment-slot__inner {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.equipment-slot.has-item {
  border-color: rgba(184, 148, 70, 0.6);
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.6), rgba(30, 60, 90, 0.8));
}

.equipment-slot__item {
  width: 44px;
  height: 44px;
  object-fit: contain;
}

.equipment-slot.is-locked {
  border-color: rgba(80, 80, 80, 0.4);
  background: rgba(30, 30, 40, 0.6);
}

.equipment-slot__lock {
  font-size: 20px;
  opacity: 0.5;
}

.equipment-bonuses {
  display: flex;
  justify-content: center;
  gap: 16px;
  padding: 10px 16px;
  background: linear-gradient(90deg, rgba(20, 40, 60, 0.8), rgba(30, 50, 70, 0.9), rgba(20, 40, 60, 0.8));
  border-top: 1px solid rgba(100, 100, 100, 0.3);
  border-bottom: 1px solid rgba(100, 100, 100, 0.3);
}

.equipment-bonus {
  display: flex;
  align-items: center;
  gap: 4px;
}

.equipment-bonus__icon {
  font-size: 16px;
  width: 18px;
  height: 18px;
  object-fit: contain;
}

.equipment-bonus__value {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: #aaa;
  font-weight: 600;
}

.equipment-tabs {
  display: flex;
  justify-content: center;
  gap: 20px;
  padding: 12px 16px;
  background: linear-gradient(90deg, transparent, rgba(42, 79, 110, 0.3), transparent);
}

.equipment-tab {
  font-family: 'EB Garamond', serif;
  font-size: 15px;
  color: #888;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 8px 20px;
  border-radius: 4px;
  transition: all 0.2s;
  border: 1px solid transparent;
}

.equipment-tab:hover {
  color: #ccc;
}

.equipment-tab.is-active {
  color: #fff;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.6), rgba(30, 60, 90, 0.8));
  border-color: rgba(100, 150, 200, 0.5);
}

.equipment-tab__count {
  color: #666;
  font-size: 13px;
}

.equipment-inventory {
  padding: 12px 24px;
}

.equipment-inventory__grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  margin-bottom: 10px;
}

.inventory-slot {
  aspect-ratio: 1;
  background: rgba(30, 40, 60, 0.6);
  border: 1px solid rgba(100, 100, 100, 0.4);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
}

.inventory-slot:hover {
  border-color: var(--heraldic-gold);
  background: rgba(42, 79, 110, 0.5);
}

.inventory-slot.is-active {
  border: 2px solid var(--heraldic-gold);
  background: rgba(184, 148, 70, 0.25);
  box-shadow: 0 0 8px rgba(184, 148, 70, 0.4);
}

.inventory-slot__icon {
  font-size: 22px;
  opacity: 0.7;
  width: 28px;
  height: 28px;
  max-width: 28px;
  max-height: 28px;
  object-fit: contain;
}

img.inventory-slot__icon {
  opacity: 0.5;
  filter: grayscale(0.8);
  width: 28px;
  height: 28px;
}

.inventory-slot.is-active img.inventory-slot__icon {
  opacity: 1;
  filter: none;
}

.inventory-slot:hover img.inventory-slot__icon {
  opacity: 0.8;
  filter: grayscale(0.3);
}

.inventory-slot.is-empty {
  background: rgba(20, 25, 35, 0.5);
  border-color: rgba(60, 60, 60, 0.3);
}

/* Element slots with colored circles */
.inventory-slot--element {
  background: transparent;
  border: none;
}

.inventory-slot--element:hover {
  background: transparent;
}

.inventory-slot__circle {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.inventory-slot__circle--all {
  background: linear-gradient(135deg, rgba(100, 180, 100, 0.8), rgba(60, 140, 60, 0.9));
  box-shadow: 0 0 6px rgba(100, 180, 100, 0.5);
}

.inventory-slot__circle--fire {
  background: linear-gradient(135deg, rgba(255, 120, 60, 0.85), rgba(200, 80, 40, 0.9));
  box-shadow: 0 0 6px rgba(255, 120, 60, 0.5);
}

.inventory-slot__circle--water {
  background: linear-gradient(135deg, rgba(70, 150, 255, 0.85), rgba(40, 100, 200, 0.9));
  box-shadow: 0 0 6px rgba(70, 150, 255, 0.5);
}

.inventory-slot__circle--air {
  background: linear-gradient(135deg, rgba(245, 200, 80, 0.85), rgba(200, 160, 50, 0.9));
  box-shadow: 0 0 6px rgba(245, 200, 80, 0.5);
}

.inventory-slot__circle--earth {
  background: linear-gradient(135deg, rgba(90, 210, 120, 0.85), rgba(60, 160, 80, 0.9));
  box-shadow: 0 0 6px rgba(90, 210, 120, 0.5);
}

.inventory-slot__circle img.inventory-slot__icon {
  width: 20px;
  height: 20px;
  opacity: 1;
  filter: none;
}

.equipment-progress {
  text-align: center;
  padding: 8px 16px;
}

.equipment-progress__text {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: #5ba3e0;
}

.equipment-progress__text b {
  color: #5ba3e0;
}

.equipment-action {
  display: flex;
  justify-content: center;
  padding: 12px 16px;
}

.equipment-action__btn {
  font-family: 'EB Garamond', serif;
  font-size: 18px;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, #2e7d32, #1b5e20);
  border: 2px solid #4caf50;
  border-radius: 8px;
  padding: 12px 48px;
  cursor: pointer;
  transition: all 0.2s;
  text-transform: uppercase;
  letter-spacing: 1px;
  text-decoration: none;
  display: inline-block;
}

.equipment-action__btn:hover {
  background: linear-gradient(135deg, #388e3c, #2e7d32);
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.4);
  transform: translateY(-2px);
}

.equipment-hint {
  padding: 12px 20px 16px;
  text-align: center;
}

.equipment-hint p {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: #e6b84d;
  margin: 0;
  line-height: 1.5;
}

/* ============================================================
   FORGE SCREEN (КУЗНЯ)
   ============================================================ */

.forge-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: linear-gradient(180deg, #0a1520 0%, #1a0a0a 50%, #0a1520 100%);
}

.forge-header {
  padding: 12px 16px;
  background: linear-gradient(90deg, rgba(139, 30, 30, 0.6), rgba(180, 80, 30, 0.7), rgba(139, 30, 30, 0.6));
  border-bottom: 2px solid var(--heraldic-gold);
}

.forge-header__title {
  font-family: 'EB Garamond', serif;
  font-size: 20px;
  font-weight: 700;
  color: var(--heraldic-gold);
  margin: 0;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.forge-promo {
  display: flex;
  gap: 16px;
  padding: 16px;
  background: linear-gradient(135deg, rgba(40, 20, 10, 0.9), rgba(60, 30, 15, 0.8));
  border-bottom: 1px solid rgba(184, 148, 70, 0.3);
}

.forge-promo__avatar {
  flex-shrink: 0;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid var(--heraldic-gold);
  background: linear-gradient(135deg, #2a1a0a, #4a2a1a);
  box-shadow: 0 0 20px rgba(255, 100, 0, 0.4);
}

.forge-promo__img {
  width: 100%;
  height: 100%;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80"><circle cx="40" cy="30" r="18" fill="%23c9a44a"/><path d="M20 75 Q40 50 60 75" fill="%23a0522d"/><circle cx="35" cy="28" r="3" fill="%23000"/><circle cx="45" cy="28" r="3" fill="%23000"/></svg>') center/cover;
}

.forge-promo__speech {
  flex: 1;
  background: linear-gradient(135deg, rgba(60, 40, 20, 0.8), rgba(80, 50, 25, 0.7));
  border: 1px solid rgba(184, 148, 70, 0.4);
  border-radius: 8px;
  padding: 12px 14px;
  position: relative;
}

.forge-promo__speech::before {
  content: '';
  position: absolute;
  left: -10px;
  top: 20px;
  border: 8px solid transparent;
  border-right-color: rgba(80, 50, 25, 0.7);
}

.forge-promo__speech p {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: #f0e6d0;
  margin: 0;
  line-height: 1.5;
}

/* Forge slots for selected items */
.forge-slots {
  display: flex;
  justify-content: center;
  gap: 12px;
  padding: 16px;
}

.forge-slot {
  width: 56px;
  height: 56px;
  border: 2px solid rgba(150, 100, 50, 0.6);
  border-radius: 6px;
  background: linear-gradient(135deg, rgba(40, 30, 20, 0.8), rgba(60, 40, 25, 0.9));
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5);
}

.forge-slot:hover {
  border-color: var(--heraldic-gold);
  box-shadow: 0 0 12px rgba(184, 148, 70, 0.4), inset 0 2px 8px rgba(0, 0, 0, 0.5);
}

.forge-slot__inner {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.forge-slot.has-item {
  border-color: var(--heraldic-gold);
  background: linear-gradient(135deg, rgba(60, 45, 25, 0.9), rgba(80, 55, 30, 0.95));
}

.forge-slot__item {
  width: 48px;
  height: 48px;
  object-fit: contain;
}

.forge-action {
  display: flex;
  justify-content: center;
  padding: 16px;
}

.forge-action__btn {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, #2a4f6e, #1a3a5a);
  border: 2px solid #5ba3e0;
  border-radius: 6px;
  padding: 12px 36px;
  cursor: pointer;
  transition: all 0.2s;
  text-transform: none;
}

.forge-action__btn:hover {
  background: linear-gradient(135deg, #3a6f9e, #2a5f8e);
  box-shadow: 0 4px 16px rgba(91, 163, 224, 0.4);
  transform: translateY(-2px);
}

.forge-rules {
  text-align: center;
  padding: 14px 20px;
  background: linear-gradient(90deg, transparent, rgba(40, 20, 10, 0.5), transparent);
  border-top: 1px solid rgba(100, 60, 30, 0.3);
  border-bottom: 1px solid rgba(100, 60, 30, 0.3);
}

.forge-rules__text {
  font-family: 'EB Garamond', serif;
  font-size: 13px;
  color: #c0a080;
  margin: 0 0 10px;
  line-height: 1.5;
}

.forge-rules__elements {
  display: flex;
  justify-content: center;
  gap: 14px;
}

.forge-rules__elem {
  width: 22px;
  height: 22px;
  object-fit: contain;
  filter: drop-shadow(0 0 4px rgba(255,255,255,0.3));
}

.forge-tabs {
  display: flex;
  justify-content: center;
  gap: 20px;
  padding: 12px 16px;
  background: linear-gradient(90deg, transparent, rgba(42, 79, 110, 0.3), transparent);
}

.forge-tab {
  font-family: 'EB Garamond', serif;
  font-size: 15px;
  color: #888;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 8px 20px;
  border-radius: 4px;
  transition: all 0.2s;
  border: 1px solid transparent;
}

.forge-tab:hover {
  color: #ccc;
}

.forge-tab.is-active {
  color: #fff;
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.6), rgba(30, 60, 90, 0.8));
  border-color: rgba(100, 150, 200, 0.5);
}

.forge-tab__count {
  color: #666;
  font-size: 13px;
}

.forge-inventory {
  padding: 16px 24px;
  flex: 1;
}

.forge-inventory__grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  margin-bottom: 10px;
}

.forge-nav {
  display: flex;
  justify-content: center;
  padding: 16px;
  margin-top: auto;
}

.forge-nav__btn {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, #2a4f6e, #1a3a5a);
  border: 2px solid #5ba3e0;
  border-radius: 6px;
  padding: 12px 36px;
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
  display: inline-block;
}

.forge-nav__btn:hover {
  background: linear-gradient(135deg, #3a6f9e, #2a5f8e);
  box-shadow: 0 4px 16px rgba(91, 163, 224, 0.4);
  transform: translateY(-2px);
}

/* ============================================================
   BATTLE PASS SCREEN (Алмазні нагороди)
   ============================================================ */

.battlepass-screen {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: linear-gradient(180deg, #0a1520 0%, #0d1f2d 50%, #0a1520 100%);
}

/* VIP Banner */
.bp-vip-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: linear-gradient(90deg, rgba(139, 30, 30, 0.8), rgba(180, 50, 50, 0.7));
  border-bottom: 2px solid var(--heraldic-gold);
}

.bp-vip-text {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  color: #f4e9d4;
  line-height: 1.3;
}

.bp-vip-highlight {
  color: #ffd700;
  font-weight: 700;
}

.bp-vip-btn {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  font-weight: 700;
  color: #1a1a1a;
  background: linear-gradient(180deg, #ffd700, #c5a000);
  border: 1px solid #a08000;
  border-radius: 6px;
  padding: 8px 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.bp-vip-btn:hover {
  background: linear-gradient(180deg, #ffe540, #d5b010);
  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
}

.bp-vip-price {
  font-weight: 700;
}

/* Progress */
.bp-progress {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  background: rgba(0, 0, 0, 0.4);
  border-bottom: 1px solid rgba(184, 148, 70, 0.3);
}

.bp-progress-text {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  color: #87ceeb;
}

.bp-progress-value {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 700;
  color: #00bfff;
}

/* Headers */
.bp-headers {
  display: grid;
  grid-template-columns: 1fr 50px 1fr;
  gap: 0;
  padding: 8px 10px;
  background: rgba(20, 40, 60, 0.6);
  border-bottom: 1px solid rgba(100, 100, 100, 0.3);
}

.bp-header {
  font-family: 'EB Garamond', serif;
  font-size: 11px;
  color: #aaa;
  text-align: center;
}

.bp-header--free {
  grid-column: 1;
}

.bp-header--vip {
  grid-column: 3;
  color: #ffd700;
}

/* Track */
.bp-track {
  flex: 1;
  overflow-y: auto;
  padding: 0;
}

/* Level Row */
.bp-level {
  display: grid;
  grid-template-columns: 1fr 60px 1fr;
  min-height: 70px;
  align-items: center;
  border-bottom: 1px solid rgba(50, 50, 50, 0.5);
}

/* Milestone */
.bp-milestone {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  height: 100%;
}

.bp-milestone-line {
  width: 3px;
  flex: 1;
  background: linear-gradient(180deg, #2a2a2a, #3a3a3a);
}

.bp-milestone-badge {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #4a4a4a, #2a2a2a);
  border: 2px solid #666;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 700;
  color: #ccc;
  z-index: 1;
}

.bp-milestone-badge--gold {
  background: linear-gradient(135deg, #ffd700, #c5a000);
  border-color: #ffd700;
  color: #1a1a1a;
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.5);
}

/* Rewards */
.bp-reward {
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.bp-reward--free {
  align-items: flex-end;
}

.bp-reward--vip {
  align-items: flex-start;
}

.bp-reward-icons {
  display: flex;
  align-items: center;
  gap: 4px;
}

.bp-reward-icon {
  font-size: 18px;
}

.bp-reward-icon-img {
  width: 20px;
  height: 20px;
  object-fit: contain;
}

.bp-reward-bonus {
  font-family: 'EB Garamond', serif;
  font-size: 11px;
  color: #ffd700;
  font-weight: 700;
}

.bp-reward-item {
  display: flex;
  align-items: center;
  gap: 6px;
  background: rgba(0, 0, 0, 0.4);
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid rgba(100, 100, 100, 0.3);
}

.bp-reward-name {
  font-family: 'EB Garamond', serif;
  font-size: 11px;
  color: #ccc;
  line-height: 1.2;
}

.bp-reward-resource {
  display: flex;
  align-items: center;
  gap: 4px;
}

.bp-reward-amount {
  font-family: 'EB Garamond', serif;
  font-size: 12px;
  color: #87ceeb;
  font-weight: 600;
}

/* Exchange */
.bp-exchange {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 14px;
  background: rgba(0, 0, 0, 0.5);
  border-top: 1px solid rgba(100, 100, 100, 0.3);
}

.bp-exchange-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.bp-exchange-icon {
  font-size: 14px;
  color: #4caf50;
}

.bp-exchange-count {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 700;
  color: #4caf50;
}

.bp-exchange-card {
  width: 50px;
  height: 70px;
  background: linear-gradient(135deg, rgba(60, 80, 60, 0.8), rgba(40, 60, 40, 0.9));
  border: 2px solid rgba(100, 150, 100, 0.5);
  border-radius: 6px;
}

.bp-exchange-arrow {
  font-size: 24px;
  color: #87ceeb;
}

/* Action Button */
.bp-action {
  padding: 12px 16px;
  background: rgba(0, 0, 0, 0.4);
}

.bp-action-btn {
  position: relative;
  width: 100%;
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 700;
  color: #1a1a1a;
  background: transparent;
  border: 2px solid #8b7355;
  border-radius: 8px;
  padding: 12px 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  overflow: hidden;
  z-index: 1;
}

.bp-action-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  border-radius: 6px;
  z-index: -1;
}

.bp-action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
}

.bp-action-link {
  display: block;
  text-align: center;
  color: #5ba3e0;
  font-size: 13px;
  text-decoration: none;
  margin-top: 12px;
}

.bp-action-link:hover {
  color: #8dc8f8;
  text-decoration: underline;
}

.bp-timer {
  text-align: center;
  color: #a0a0a0;
  font-size: 13px;
  padding: 16px 0;
  border-top: 1px solid #333;
  margin-top: 20px;
}

.bp-timer-value {
  color: #fff;
  font-weight: 600;
}

/* ============================================
   MAGIC ITEMS PAGE
   ============================================ */

.magic-items-screen {
  padding: 16px;
  padding-bottom: 100px;
}

.mi-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.mi-card {
  display: flex;
  gap: 12px;
  background: linear-gradient(135deg, #1a2a3a 0%, #0d1a24 100%);
  border: 1px solid #2a4a5a;
  border-radius: 12px;
  padding: 14px;
}

.mi-card-icon {
  width: 48px;
  height: 48px;
  min-width: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #2a3a4a, #1a2a3a);
  border-radius: 10px;
  border: 1px solid #3a5a6a;
  font-size: 24px;
}

.mi-card-icon img {
  width: 28px;
  height: 28px;
  object-fit: contain;
}

.mi-card-content {
  flex: 1;
}

.mi-card-title {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 700;
  color: #f0c040;
  margin: 0 0 6px 0;
}

.mi-card-desc {
  font-size: 13px;
  color: #c0c0c0;
  line-height: 1.5;
  margin: 0 0 8px 0;
}

.mi-card-note {
  font-size: 12px;
  color: #80a0b0;
  margin: 0;
}

.mi-section {
  padding: 16px 0 8px;
}

.mi-section-title {
  font-family: 'EB Garamond', serif;
  font-size: 18px;
  font-weight: 700;
  color: #5ba3e0;
  margin: 0;
  padding-bottom: 8px;
  border-bottom: 1px solid #2a4a5a;
}

.mi-notice {
  padding: 14px;
  border-radius: 10px;
  font-size: 13px;
  line-height: 1.5;
  margin: 8px 0;
}

.mi-notice p {
  margin: 0;
}

.mi-notice--info {
  background: rgba(91, 163, 224, 0.15);
  border: 1px solid #5ba3e0;
  color: #a0d0ff;
}

.mi-notice--warning {
  background: rgba(255, 80, 80, 0.1);
  border: 1px solid #ff5050;
  color: #ff9090;
}

.mi-action {
  padding: 20px 0;
}

.mi-action-btn {
  position: relative;
  width: 100%;
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 700;
  color: #1a1a1a;
  background: transparent;
  border: 2px solid #8b7355;
  border-radius: 8px;
  padding: 12px 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  overflow: hidden;
  z-index: 1;
}

.mi-action-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  border-radius: 6px;
  z-index: -1;
}

.mi-action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
}

.mi-header {
  padding: 12px 0 16px;
  text-align: center;
}

.mi-header-title {
  font-family: 'EB Garamond', serif;
  font-size: 22px;
  font-weight: 700;
  color: #f0c040;
  margin: 0;
}

/* ============================================
   MY ITEMS PAGE
   ============================================ */

.my-items-screen {
  padding: 16px;
  padding-top: 60px;
  padding-bottom: 140px;
}

.myi-header {
  text-align: center;
  padding: 8px 0 12px;
  background: linear-gradient(180deg, rgba(0,80,60,0.6) 0%, rgba(0,40,30,0.8) 100%);
  border-radius: 8px;
  margin-bottom: 12px;
}

.myi-header-title {
  font-family: 'EB Garamond', serif;
  font-size: 18px;
  font-weight: 700;
  color: #f0c040;
  margin: 0;
}

.myi-counter {
  text-align: center;
  color: #a0a0a0;
  font-size: 14px;
  margin-bottom: 16px;
}

.myi-counter-value,
.myi-counter-total {
  color: #fff;
  font-weight: 600;
}

.myi-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-bottom: 16px;
}

.myi-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.myi-item-icon {
  width: 56px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #2a3a4a, #1a2a3a);
  border-radius: 12px;
  border: 2px solid #3a5a6a;
  font-size: 28px;
  margin-bottom: 4px;
}

.myi-item-count {
  font-size: 11px;
  color: #80a0b0;
  margin-bottom: 2px;
}

.myi-item-name {
  font-size: 10px;
  color: #c0c0c0;
  line-height: 1.2;
  max-width: 70px;
}

.myi-section {
  padding: 12px 0 8px;
  margin-top: 8px;
}

.myi-section-title {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 700;
  color: #f08040;
  margin: 0;
  text-align: center;
}

.myi-action {
  padding: 16px 0;
}

.myi-action-btn {
  position: relative;
  width: 100%;
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 700;
  color: #1a1a1a;
  background: transparent;
  border: 2px solid #8b7355;
  border-radius: 8px;
  padding: 12px 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  overflow: hidden;
  z-index: 1;
}

.myi-action-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  border-radius: 6px;
  z-index: -1;
}

.myi-action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
}

.myi-link {
  text-align: center;
  padding-bottom: 16px;
}

.myi-link-text {
  color: #5ba3e0;
  font-size: 13px;
  text-decoration: none;
}

.myi-link-text:hover {
  color: #8dc8f8;
  text-decoration: underline;
}

.myi-bottom-tab {
  position: fixed;
  bottom: 56px;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: linear-gradient(135deg, #4a3a20, #3a2a10);
  border-top: 2px solid #f0c040;
  padding: 10px;
  cursor: pointer;
  z-index: 100;
}

.myi-bottom-tab-icon {
  font-size: 18px;
}

.myi-bottom-tab-text {
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  font-weight: 700;
  color: #f0c040;
}

/* ============================================
   INVASION PAGE (Навала Урфіна)
   ============================================ */

.invasion-screen {
  padding: 16px;
  padding-top: 70px;
  padding-bottom: 80px;
}

.inv-header {
  text-align: center;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(0,80,60,0.8) 0%, rgba(0,50,40,0.9) 100%);
  border-radius: 8px;
  margin-bottom: 16px;
}

.inv-header-title {
  font-family: 'EB Garamond', serif;
  font-size: 20px;
  font-weight: 700;
  color: #f0c040;
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.inv-boss-banner {
  background: linear-gradient(135deg, #2a1a0a 0%, #1a0a00 100%);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
  border: 1px solid #4a3a2a;
}

.inv-boss-images {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
}

.inv-boss-img {
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #3a2a1a, #2a1a0a);
  border-radius: 10px;
  border: 2px solid #5a4a3a;
  font-size: 32px;
}

.inv-boss-img--main {
  width: 80px;
  height: 80px;
  font-size: 44px;
  border-color: #8a6a4a;
}

.inv-requirement {
  text-align: center;
  padding: 16px;
  margin-bottom: 16px;
}

.inv-requirement-text {
  font-size: 14px;
  color: #c0c0c0;
  line-height: 1.5;
  margin: 0 0 16px 0;
}

.inv-requirement-league {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-bottom: 8px;
}

.inv-league-badge {
  width: 40px;
  height: 40px;
  object-fit: contain;
}

.inv-league-name {
  font-family: 'EB Garamond', serif;
  font-size: 18px;
  font-weight: 700;
  color: #ffd700;
}

.inv-requirement-or {
  font-size: 14px;
  color: #f0c040;
  margin: 0;
}

.inv-action {
  padding: 0 16px 16px;
}

.inv-action-btn {
  position: relative;
  width: 100%;
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 700;
  color: #1a1a1a;
  background: transparent;
  border: 2px solid #8b7355;
  border-radius: 8px;
  padding: 14px 24px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  overflow: hidden;
  z-index: 1;
}

.inv-action-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-wood);
  background-size: cover;
  background-position: center;
  border-radius: 6px;
  z-index: -1;
}

.inv-action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
}

.inv-info {
  text-align: center;
  padding: 12px 16px;
  margin-bottom: 20px;
}

.inv-info-text {
  font-size: 13px;
  color: #808080;
  margin: 0;
  font-style: italic;
}

.inv-menu {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.inv-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: transparent;
  border: 1px solid #4a6a8a;
  border-radius: 10px;
  text-decoration: none;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

.inv-menu-item::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--btn-tex-blue);
  background-size: cover;
  background-position: center;
  border-radius: 10px;
  z-index: -1;
}

.inv-menu-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(74, 106, 138, 0.4);
}

.inv-menu-icon {
  font-size: 20px;
}

.inv-menu-text {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 600;
  color: #1a3a5a;
}

/* ============================================================
   BATTLE SCREEN
   ============================================================ */

.battle-screen {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-top: 8px !important;
  padding-bottom: calc(var(--botH) + 12px) !important;
  background: linear-gradient(180deg, #1a2a3a 0%, #0d1a2a 100%);
}

/* Battle instructions */
.battle-instructions {
  text-align: center;
  font-size: 14px;
  color: var(--ink);
  background: rgba(0, 0, 0, 0.4);
  padding: 8px 12px;
  border-radius: 8px;
  margin: 0 12px 8px 12px;
  border: 1px solid rgba(184, 148, 70, 0.3);
}

/* Player panels */
.battle-player {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 12px;
  position: relative;
}

.battle-player--enemy {
  background: linear-gradient(135deg, rgba(139, 30, 30, 0.6), rgba(80, 20, 20, 0.8));
  border: 1px solid rgba(255, 100, 100, 0.3);
}

.battle-player--self {
  background: linear-gradient(135deg, rgba(42, 79, 110, 0.6), rgba(20, 40, 60, 0.8));
  border: 1px solid rgba(100, 180, 255, 0.3);
}

.battle-player__avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--heraldic-gold);
  flex-shrink: 0;
}

.battle-player__avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.battle-player__info {
  flex: 1;
}

.battle-player__name {
  font-family: 'EB Garamond', serif;
  font-size: 16px;
  font-weight: 600;
  color: var(--ink);
}

.battle-player__rarity {
  display: inline-block;
  background: rgba(184, 148, 70, 0.3);
  color: var(--heraldic-gold);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 700;
  margin-right: 6px;
  vertical-align: -2px;
}

.battle-player__league-icon{
  width: 14px;
  height: 14px;
  object-fit: contain;
  display: block;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.55));
}

.battle-player__stats {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}

.battle-player__hp {
  font-size: 18px;
  font-weight: 700;
  color: #ff6b6b;
}

.battle-player__damage {
  font-size: 14px;
  font-weight: 600;
}

.battle-player__damage--taken {
  color: #ff4444;
}

.battle-player__damage--dealt {
  color: #44ff44;
}

/* Battle cards */
.battle-cards {
  display: flex;
  justify-content: center;
  gap: 8px;
  padding: 4px 8px;
}

.battle-card-slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.battle-card-slot .ref-card {
  width: 100px;
  height: 100px;
}

/* Boss battle: hide enemy cards */
.battle-screen.is-boss .battle-cards--enemy .ref-card.is-mystery .ref-card__top {
  opacity: 0;
}

.battle-screen.is-boss .battle-cards--enemy .ref-card.is-mystery .ref-card__elem {
  display: none;
}

.battle-screen.is-boss .battle-cards--enemy .ref-card.is-mystery .ref-card__art {
  background-image:
    radial-gradient(140% 120% at 30% 20%, rgba(255, 255, 255, 0.08), transparent 60%),
    radial-gradient(160% 140% at 70% 80%, rgba(0, 0, 0, 0.55), transparent 62%),
    repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0 6px, rgba(0, 0, 0, 0.12) 6px 12px),
    linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(0, 0, 0, 0.55));
  background-size: auto, auto, auto, auto;
  background-position: 30% 20%, 70% 80%, 0 0, 0 0;
  background-repeat: no-repeat;
  filter: saturate(0.85) contrast(1.05);
}

.battle-screen.is-boss .battle-cards--enemy .ref-card.is-mystery .ref-card__art::after {
  content: "?";
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-family: "Forum", serif;
  font-size: 42px;
  color: rgba(255, 255, 255, 0.75);
  text-shadow: 0 6px 18px rgba(0, 0, 0, 0.75);
}

.battle-card-damage {
  background: linear-gradient(180deg, #8b1e1e, #5a1010);
  padding: 4px 12px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  font-size: 14px;
  font-weight: 700;
  color: #fff;
}

.battle-card-damage--top {
  order: -1;
}

/* Battle multipliers (center row) */
.battle-multipliers {
  display: flex;
  justify-content: center;
  gap: 8px;
  padding: 8px;
}

.battle-multiplier {
  width: 100px;
  background: rgba(0, 0, 0, 0.6);
  padding: 6px 12px;
  border-radius: 6px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  color: #aaa;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.battle-multiplier__icon{
  width: 16px;
  height: 16px;
  object-fit: contain;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.55));
  opacity: 0.95;
}

.battle-multiplier--bonus {
  background: rgba(60, 200, 90, 0.3);
  color: #4ade80;
  border: 1px solid rgba(60, 200, 90, 0.5);
}

/* Battle log */
.battle-log {
  background: linear-gradient(180deg, rgba(30, 40, 50, 0.9), rgba(20, 30, 40, 0.95));
  border-radius: 12px;
  border: 1px solid rgba(184, 148, 70, 0.3);
  padding: 12px;
  margin-top: auto;
}

.battle-log__title {
  text-align: center;
  font-family: 'EB Garamond', serif;
  font-size: 14px;
  color: var(--heraldic-gold);
  margin-bottom: 10px;
  border-bottom: 1px solid rgba(184, 148, 70, 0.3);
  padding-bottom: 8px;
}

.battle-log__stats {
  display: flex;
  justify-content: center;
  gap: 40px;
}

.battle-log__stat {
  display: flex;
  align-items: center;
  gap: 8px;
}

.battle-log__icon {
  font-size: 20px;
}

.battle-log__value {
  font-size: 20px;
  font-weight: 700;
  color: var(--ink);
}

/* Selected card state */
.ref-card.selected {
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);
  border: 2px solid #ffd700;
  transform: scale(1.05);
  transition: all 0.2s ease;
}

/* Battle log entries */
.battle-log__entry {
  font-size: 14px;
  color: var(--ink);
  margin-bottom: 4px;
  padding: 4px 8px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 4px;
}

/* Battle end modal */
.battle-end-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.battle-end-modal__content {
  background: linear-gradient(135deg, rgba(30, 40, 50, 0.95), rgba(20, 30, 40, 0.98));
  border: 2px solid var(--heraldic-gold);
  border-radius: 16px;
  padding: 32px;
  text-align: center;
  max-width: 300px;
  width: 90%;
}

.battle-end-modal__content h2 {
  font-family: 'EB Garamond', serif;
  font-size: 24px;
  color: var(--heraldic-gold);
  margin-bottom: 20px;
}

.battle-end-modal__button {
  background: linear-gradient(135deg, var(--heraldic-gold), #8b6a2a);
  border: none;
  color: var(--bg0);
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.battle-end-modal__button:hover {
  transform: scale(1.05);
}

/* Battle actions */
.battle-actions {
  display: flex;
  justify-content: center;
  padding: 12px 16px;
  gap: 12px;
}

/* Damage flash animation */
.damage-flash {
  animation: damageFlash 0.5s ease-out;
}

@keyframes damageFlash {
  0% { color: #ff6b6b; transform: scale(1.1); }
  50% { color: #ff4444; transform: scale(1.2); }
  100% { color: #ff6b6b; transform: scale(1); }
}

/* ===== Card upgrade meta (card detail) ===== */
.card-upgrade-meta{
  margin-top: 10px;
  padding: 10px 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 18px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.07);
  background: rgba(0,0,0,0.18);
  font-family: "EB Garamond", serif;
  font-size: 13px;
  color: rgba(244,233,212,0.92);
  opacity: 0.95;
}

.card-upgrade-meta__item{
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.card-upgrade-meta__label{
  opacity: 0.9;
  font-weight: 700;
}

.card-upgrade-meta__value{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-weight: 900;
}

.card-upgrade-meta__coin{
  width: 16px;
  height: 16px;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,0.65));
}


