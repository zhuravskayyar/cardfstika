<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cardastika — Турнірне лобі</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&family=Forum&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="../../assets/css/ui-shell.css">
</head>
<body>
  <div id="app" class="app">

    <!-- HUD -->
    <header id="hud" class="hud">
      <div class="hud__left">
        <span class="hud__icon">🏆</span>
        <span class="hud__value" id="hudPower">—</span>
      </div>

      <div class="hud__right">
        <div class="hud__pill" title="Silver">
          <img class="hud__icon" src="../../assets/icons/coin-silver.svg" alt="Silver" />
          <span class="hud__value" id="hudSilver">—</span>
        </div>
        <div class="hud__pill" title="Diamonds">
          <img class="hud__icon" src="../../assets/icons/diamond.svg" alt="Diamonds" />
          <span class="hud__value" id="hudDiamonds">—</span>
        </div>
        <div class="hud__pill" title="Gold">
          <img class="hud__icon" src="../../assets/icons/coin-gold.svg" alt="Gold" />
          <span class="hud__value" id="hudGold">—</span>
        </div>
      </div>
    </header>

    <!-- Main screen -->
    <main id="screen" class="screen tournament-lobby-screen">

      <!-- Заголовок турніру -->
      <div class="tournament-lobby-header">
        <h1 class="tournament-lobby-title">Турнір</h1>
        <div class="tournament-league-badge" id="leagueBadge">
          <img class="tournament-league-icon" id="leagueIcon" src="../../assets/icons/trophy.svg" alt="">
          <span class="tournament-league-name" id="leagueName">Легендарна ліга</span>
        </div>
      </div>

      <!-- Статус турніру -->
      <section class="tournament-status panel" id="statusPanel">
        <div class="tournament-status__row">
          <span class="tournament-status__label">Статус:</span>
          <span class="tournament-status__value" id="statusText">Реєстрація</span>
        </div>
        <div class="tournament-status__row">
          <span class="tournament-status__label">Учасників:</span>
          <span class="tournament-status__value" id="participantsCount">0 / 64</span>
        </div>
        <div class="tournament-status__row">
          <span class="tournament-status__label">Поточний раунд:</span>
          <span class="tournament-status__value" id="currentRound">—</span>
        </div>
        <div class="tournament-status__row">
          <span class="tournament-status__label">Ваш статус:</span>
          <span class="tournament-status__value tournament-status__value--highlight" id="playerStatus">Не зареєстровано</span>
        </div>
      </section>

      <!-- Кнопка реєстрації / Кнопка бою -->
      <div class="tournament-actions" id="actionsPanel">
        <button class="btn-attack tournament-register-btn" id="registerBtn" type="button">
          Записатися на турнір
        </button>
        <button class="btn-attack tournament-battle-btn" id="battleBtn" type="button" hidden>
          Розпочати бій
        </button>
        <button class="btn-wood tournament-new-btn" id="newTournamentBtn" type="button" hidden>
          <span class="label">Новий турнір</span>
        </button>
        <div class="tournament-waiting" id="waitingPanel" hidden>
          <div class="tournament-waiting__spinner"></div>
          <span class="tournament-waiting__text">Очікуємо суперника...</span>
        </div>
      </div>

      <!-- Інформація про суперника -->
      <section class="tournament-opponent panel" id="opponentPanel" hidden>
        <h2 class="panel__title">Ваш суперник</h2>
        <div class="tournament-opponent__card">
          <div class="tournament-opponent__avatar">
            <img src="../../assets/cards/arts/earth_001.webp" alt="Opponent" id="opponentAvatar">
          </div>
          <div class="tournament-opponent__info">
            <div class="tournament-opponent__name" id="opponentName">—</div>
            <div class="tournament-opponent__stats">
              <span>Сила: <b id="opponentPower">—</b></span>
              <span>Рейтинг: <b id="opponentRating">—</b></span>
            </div>
            <div class="tournament-opponent__element">
              Найкраща стихія: <span id="opponentBestElement" class="element-badge">—</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Вибір бафу -->
      <section class="tournament-buff panel" id="buffPanel" hidden>
        <h2 class="panel__title">Оберіть підсилення</h2>
        <p class="tournament-buff__desc">Підсилення діє один бій і збільшує HP карт обраної стихії на 15%</p>
        
        <div class="tournament-buff__options">
          <button class="tournament-buff__option" id="buff1Btn" type="button">
            <div class="tournament-buff__option-icon elem-fire" id="buff1Icon"></div>
            <div class="tournament-buff__option-info">
              <div class="tournament-buff__option-name" id="buff1Name">—</div>
              <div class="tournament-buff__option-desc" id="buff1Desc">—</div>
              <div class="tournament-buff__option-label" id="buff1Label">—</div>
            </div>
            <div class="tournament-buff__option-cost">
              <img src="../../assets/icons/coin-gold.svg" alt="Gold">
              <span id="buff1Cost">50</span>
            </div>
          </button>
          
          <button class="tournament-buff__option" id="buff2Btn" type="button">
            <div class="tournament-buff__option-icon elem-water" id="buff2Icon"></div>
            <div class="tournament-buff__option-info">
              <div class="tournament-buff__option-name" id="buff2Name">—</div>
              <div class="tournament-buff__option-desc" id="buff2Desc">—</div>
              <div class="tournament-buff__option-label" id="buff2Label">—</div>
            </div>
            <div class="tournament-buff__option-cost">
              <img src="../../assets/icons/coin-gold.svg" alt="Gold">
              <span id="buff2Cost">50</span>
            </div>
          </button>
        </div>
        
        <button class="btn-wood tournament-skip-buff" id="skipBuffBtn" type="button">
          <span class="label">Пропустити підсилення</span>
        </button>
      </section>

      <!-- Турнірна сітка (спрощена) -->
      <section class="tournament-bracket panel" id="bracketPanel">
        <h2 class="panel__title">Турнірна сітка</h2>
        <div class="tournament-bracket__rounds" id="bracketRounds">
          <!-- Генерується JavaScript -->
        </div>
        <div class="tournament-bracket__legend">
          <span class="bracket-legend-item bracket-legend-item--you">Ви</span>
          <span class="bracket-legend-item bracket-legend-item--won">Перемога</span>
          <span class="bracket-legend-item bracket-legend-item--lost">Поразка</span>
          <span class="bracket-legend-item bracket-legend-item--pending">Очікує</span>
        </div>
      </section>

      <!-- Призи -->
      <section class="tournament-prizes panel">
        <h2 class="panel__title">Призи</h2>
        <div class="tournament-prizes__grid">
          <div class="tournament-prize tournament-prize--gold">
            <img class="tournament-prize__icon" src="../../assets/icons/trophy.svg" alt="1st">
            <span class="tournament-prize__place">1 місце</span>
            <span class="tournament-prize__reward" id="prize1">—</span>
          </div>
          <div class="tournament-prize tournament-prize--silver">
            <img class="tournament-prize__icon" src="../../assets/icons/trophy.svg" alt="2nd">
            <span class="tournament-prize__place">2 місце</span>
            <span class="tournament-prize__reward" id="prize2">—</span>
          </div>
          <div class="tournament-prize tournament-prize--bronze">
            <img class="tournament-prize__icon" src="../../assets/icons/trophy.svg" alt="3rd">
            <span class="tournament-prize__place">3 місце</span>
            <span class="tournament-prize__reward" id="prize3">—</span>
          </div>
          <div class="tournament-prize">
            <img class="tournament-prize__icon" src="../../assets/icons/medal.svg" alt="Participant">
            <span class="tournament-prize__place">Учасник</span>
            <span class="tournament-prize__reward" id="prizeParticipant">—</span>
          </div>
        </div>
      </section>

    </main>

    <!-- Toasts / Modals host -->
    <div id="toastHost" class="toast-host" aria-live="polite"></div>
    <div id="modalHost" class="modal-host" aria-hidden="true"></div>

    <!-- Bottom navigation -->
    <nav id="botbar" class="botbar botbar--3" aria-label="Bottom navigation">
      <button class="botbar__btn" data-route="home" type="button">
        <span class="botbar__icon" aria-hidden="true"></span>
        <span class="botbar__text">Головна</span>
      </button>

      <button class="botbar__btn" data-route="profile" type="button">
        <span class="botbar__icon" aria-hidden="true"></span>
        <span class="botbar__text">Профіль</span>
      </button>

      <button class="botbar__btn" data-route="guild" type="button">
        <span class="botbar__icon" aria-hidden="true"></span>
        <span class="botbar__text">Гільдія</span>
      </button>
    </nav>

  </div>

  <script type="module" defer src="./tournament-lobby.js"></script>
  <script type="module" defer src="../../src/ui-shell.js"></script>
</body>
</html>
